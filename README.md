# zk-Verifiable-Credentials-DB

A credentials database encrypted and stored on chain.

This tool allows to an issuer to create a database to store credentials issued over subjects, and have these credentials always accessible and
untampered thanks to immutable proprieties of the blockchain. Also, a zk verification is implemented to allow the subjects proof they credentials with selective disclosure of inner claims. This project assumes that subjects are in possession of eth EOA used as a Self-sovereign identity ID.

### Use Cases
* Zero knowledge membership proof.
* Persistent credentials registers.
* Zero knowledge selective disclosure of the claims inside of a credential.

### System Players
* Issuer: Is the account who owns the contract and can issue new credentials.
* User proover: A user that holds a specific credential and can generate a proff of that possession.
* User verifier: A user that verifies the proof.

### Application overview

The application consists in a front-end built using Nextjs, and two contracts that have to be deployed on an EVM block chain. Tools like circom, snarkjs and zk-kit has ben used to implement the zk mechanics.

The first contract is CredentialsDB.sol, this contract contains a register with encrypted credentials and a Merkle Tree. The register is used to guarantee the credential availability to the users since all credentials are public acsesible nevertheless they are encrypted with users public key. The Merkle Tree is used to hold leaves that represents credentials.

The second contract is a verifier that is autogenerated using snarkjs library. The circuit from wich is generated the verifier contract is circuits/zkVerifiableCredentialsDBCore.circom.

Another component of the system is the front-end app. Through the app we can interact with on chain contracts to issue new credentials if we are the issuer and to proof and validate credentials if we are the users.

### Test instance

You can check an instance of the app deployed in harmony devnet for test proposes.

Front end: [https://zk-verifiable-credentials.surge.sh/](https://zk-verifiable-credentials.surge.sh/)

Issuer private key: "0d065b1a5dc3f5e336f20b51e7c0cca40bcffe17b64d9e01a0fa0a2188d1904a"



## Deploy an instance steps

1. Modify the example credential schema credentials-src/examplecredentialschema.json. The schema is a JSON file that defines the claims of a credentials set.

<p align="center" >
 <img width="500" src="img/credentials-schema.PNG">
</p>

