"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{496:function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d,e=c(4736),f=(c(2474),c(7571)),g=c(3098),h=c(4763),i=c(4659);function j(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var k=j(e),l=j(g),m=j(h);let n=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function o(a,b){return b&&10!=b?16==b?"0x"==a.slice(0,2)?BigInt(a):BigInt("0x"+a):void 0:BigInt(a)}function p(a){return!a}function q(a,b){return BigInt(a)<<BigInt(b)}function r(a,b){return BigInt(a)>>BigInt(b)}var s=Object.freeze({__proto__:null,fromString:o,e:o,fromArray:function(a,b){let c=BigInt(0);b=BigInt(b);for(let d=0;d<a.length;d++)c=c*b+BigInt(a[d]);return c},bitLength:function(a){let b=a.toString(16);return(b.length-1)*4+n[parseInt(b[0],16)]},isNegative:function(a){return BigInt(a)<BigInt(0)},isZero:p,shiftLeft:q,shiftRight:r,shl:q,shr:r,isOdd:function(a){return(BigInt(a)&BigInt(1))==BigInt(1)},naf:function(a){let b=BigInt(a),c=[];for(;b;){if(b&BigInt(1)){let d=2-Number(b%BigInt(4));c.push(d),b-=BigInt(d)}else c.push(0);b>>=BigInt(1)}return c},bits:function(a){let b=BigInt(a),c=[];for(;b;)b&BigInt(1)?c.push(1):c.push(0),b>>=BigInt(1);return c},toNumber:function(a){if(a>BigInt(Number.MAX_SAFE_INTEGER))throw Error("Number too big");return Number(a)},toArray:function(a,b){let c=[],d=BigInt(a);for(b=BigInt(b);d;)c.unshift(Number(d%b)),d/=b;return c},add:function(a,b){return BigInt(a)+BigInt(b)},sub:function(a,b){return BigInt(a)-BigInt(b)},neg:function(a){return-BigInt(a)},mul:function(a,b){return BigInt(a)*BigInt(b)},square:function(a){return BigInt(a)*BigInt(a)},pow:function(a,b){return BigInt(a)**BigInt(b)},exp:function(a,b){return BigInt(a)**BigInt(b)},abs:function(a){return BigInt(a)>=0?BigInt(a):-BigInt(a)},div:function(a,b){return BigInt(a)/BigInt(b)},mod:function(a,b){return BigInt(a)%BigInt(b)},eq:function(a,b){return BigInt(a)==BigInt(b)},neq:function(a,b){return BigInt(a)!=BigInt(b)},lt:function(a,b){return BigInt(a)<BigInt(b)},gt:function(a,b){return BigInt(a)>BigInt(b)},leq:function(a,b){return BigInt(a)<=BigInt(b)},geq:function(a,b){return BigInt(a)>=BigInt(b)},band:function(a,b){return BigInt(a)&BigInt(b)},bor:function(a,b){return BigInt(a)|BigInt(b)},bxor:function(a,b){return BigInt(a)^BigInt(b)},land:function(a,b){return BigInt(a)&&BigInt(b)},lor:function(a,b){return BigInt(a)||BigInt(b)},lnot:function(a){return!BigInt(a)}});function t(a,b){return"string"!=typeof a?k.default(a,b):"0x"==a.slice(0,2)?k.default(a.slice(2),16):k.default(a,b)}function u(a,b){return k.default(a).shiftLeft(b)}function v(a,b){return k.default(a).shiftRight(b)}var w=Object.freeze({__proto__:null,fromString:t,e:t,fromArray:function(a,b){return k.default.fromArray(a,b)},bitLength:function(a){return k.default(a).bitLength()},isNegative:function(a){return k.default(a).isNegative()},isZero:function(a){return k.default(a).isZero()},shiftLeft:u,shiftRight:v,shl:u,shr:v,isOdd:function(a){return k.default(a).isOdd()},naf:function(a){let b=k.default(a),c=[];for(;b.gt(k.default.zero);){if(b.isOdd()){let d=2-b.mod(4).toJSNumber();c.push(d),b=b.minus(d)}else c.push(0);b=b.shiftRight(1)}return c},bits:function(a){let b=k.default(a),c=[];for(;b.gt(k.default.zero);)b.isOdd()?c.push(1):c.push(0),b=b.shiftRight(1);return c},toNumber:function(a){if(!a.lt(k.default("9007199254740992",10)))throw Error("Number too big");return a.toJSNumber()},toArray:function(a,b){return k.default(a).toArray(b)},add:function(a,b){return k.default(a).add(k.default(b))},sub:function(a,b){return k.default(a).minus(k.default(b))},neg:function(a){return k.default.zero.minus(k.default(a))},mul:function(a,b){return k.default(a).times(k.default(b))},square:function(a){return k.default(a).square()},pow:function(a,b){return k.default(a).pow(k.default(b))},exp:function(a,b){return k.default(a).pow(k.default(b))},abs:function(a){return k.default(a).abs()},div:function(a,b){return k.default(a).divide(k.default(b))},mod:function(a,b){return k.default(a).mod(k.default(b))},eq:function(a,b){return k.default(a).eq(k.default(b))},neq:function(a,b){return k.default(a).neq(k.default(b))},lt:function(a,b){return k.default(a).lt(k.default(b))},gt:function(a,b){return k.default(a).gt(k.default(b))},leq:function(a,b){return k.default(a).leq(k.default(b))},geq:function(a,b){return k.default(a).geq(k.default(b))},band:function(a,b){return k.default(a).and(k.default(b))},bor:function(a,b){return k.default(a).or(k.default(b))},bxor:function(a,b){return k.default(a).xor(k.default(b))},land:function(a,b){return!k.default(a).isZero()&&!k.default(b).isZero()},lor:function(a,b){return!k.default(a).isZero()||!k.default(b).isZero()},lnot:function(a){return k.default(a).isZero()}});let x="function"==typeof BigInt,y={};x?Object.assign(y,s):Object.assign(y,w),y.toRprLE=function(a,b,c,d){let e="0000000"+c.toString(16),f=new Uint32Array(a.buffer,b,d/4),g=((e.length-7)*4-1>>5)+1;for(let h=0;h<g;h++)f[h]=parseInt(e.substring(e.length-8*h-8,e.length-8*h),16);for(let i=g;i<f.length;i++)f[i]=0;for(let j=4*f.length;j<d;j++)a[j]=y.toNumber(y.band(y.shiftRight(c,8*j),255))},y.toRprBE=function(a,b,c,d){let e="0000000"+c.toString(16),f=new DataView(a.buffer,a.byteOffset+b,d),g=((e.length-7)*4-1>>5)+1;for(let h=0;h<g;h++)f.setUint32(d-4*h-4,parseInt(e.substring(e.length-8*h-8,e.length-8*h),16),!1);for(let i=0;i<d/4-g;i++)f[i]=0},y.fromRprLE=function(a,b,c){c=c||a.byteLength,b=b||0;let d=new Uint32Array(a.buffer,b,c/4),e=Array(c/4);return d.forEach((a,b)=>e[e.length-b-1]=a.toString(16).padStart(8,"0")),y.fromString(e.join(""),16)},y.fromRprBE=function(a,b,c){c=c||a.byteLength,b=b||0;let d=new DataView(a.buffer,a.byteOffset+b,c),e=Array(c/4);for(let f=0;f<c/4;f++)e[f]=d.getUint32(4*f,!1).toString(16).padStart(8,"0");return y.fromString(e.join(""),16)},y.toString=function(a,b){return a.toString(b)},y.toLEBuff=function(a){let b=new Uint8Array(Math.floor((y.bitLength(a)-1)/8)+1);return y.toRprLE(b,0,a,b.byteLength),b},y.zero=y.e(0),y.one=y.e(1);let{toRprLE:z,toRprBE:A,fromRprLE:B,fromRprBE:C,toString:D,toLEBuff:E,zero:F,one:G,fromString:H,e:I,fromArray:J,bitLength:K,isNegative:L,isZero:M,shiftLeft:N,shiftRight:O,shl:P,shr:Q,isOdd:R,naf:S,bits:T,toNumber:U,toArray:V,add:W,sub:X,neg:Y,mul:Z,square:$,pow:_,exp:aa,abs:ab,div:ac,mod:ad,eq:ae,neq:af,lt:ag,gt:ah,leq:ai,geq:aj,band:ak,bor:al,bxor:am,land:an,lor:ao,lnot:ap}=y;var aq=Object.freeze({__proto__:null,toRprLE:z,toRprBE:A,fromRprLE:B,fromRprBE:C,toString:D,toLEBuff:E,zero:F,one:G,fromString:H,e:I,fromArray:J,bitLength:K,isNegative:L,isZero:M,shiftLeft:N,shiftRight:O,shl:P,shr:Q,isOdd:R,naf:S,bits:T,toNumber:U,toArray:V,add:W,sub:X,neg:Y,mul:Z,square:$,pow:_,exp:aa,abs:ab,div:ac,mod:ad,eq:ae,neq:af,lt:ag,gt:ah,leq:ai,geq:aj,band:ak,bor:al,bxor:am,land:an,lor:ao,lnot:ap});function ar(a){return((4294901760&a)!=0?(a&=4294901760,16):0)|((4278255360&a)!=0?(a&=4278255360,8):0)|((4042322160&a)!=0?(a&=4042322160,4):0)|((3435973836&a)!=0?(a&=3435973836,2):0)|(2863311530&a)!=0}function as(a,b,c,d,e){let f=1<<c;if(1==f)return[b[d]];if(2==f)return[a.F.add(b[d],b[d+e]),a.F.sub(b[d],b[d+e])];let g=f>>1,h=as(a,b,c-1,d,2*e),i=as(a,b,c-1,d+e,2*e),j=Array(f);for(let k=0;k<g;k++)j[k]=a.F.add(h[k],a.F.mul(a.roots[c][k],i[k])),j[k+g]=a.F.sub(h[k],a.F.mul(a.roots[c][k],i[k]));return j}function at(a,b,c){let d=1<<c;if(1==d)return[b[0]];let e=d>>1,f=at(a,b.slice(0,e),c-1),g=at(a,b.slice(e),c-1),h=Array(d);for(let i=0;i<e;i++)h[i]=a.F.add(f[i],a.F.mul(a.roots[c][i],g[i])),h[i+e]=a.F.sub(f[i],a.F.mul(a.roots[c][i],g[i]));return h}let au=[];for(let av=0;av<256;av++)au[av]=aw(av,8);function aw(a,b){let c=0,d=a;for(let e=0;e<b;e++)c<<=1,c|=1&d,d>>=1;return c}function ax(a,b){return(au[a>>>24]|au[a>>>16&255]<<8|au[a>>>8&255]<<16|au[255&a]<<24)>>>32-b}function ay(a,b){for(let c=0;c<a.length;c++){let d=ax(c,b);if(d>c){let e=a[c];a[c]=a[d],a[d]=e}}}function az(a,b,c){let d;if(M(c))return a.zero;let e=S(c);if(1==e[e.length-1])d=b;else if(-1==e[e.length-1])d=a.neg(b);else throw Error("invlaud NAF");for(let f=e.length-2;f>=0;f--)d=a.double(d),1==e[f]?d=a.add(d,b):-1==e[f]&&(d=a.sub(d,b));return d}function aA(a,b,c){if(M(c))return a.one;let d=T(c);if(0==d.length)return a.one;let e=b;for(let f=d.length-2;f>=0;f--)e=a.square(e),d[f]&&(e=a.mul(e,b));return e}function aB(a){if(a.m%2==1){if(ae(ad(a.p,4),1)){if(ae(ad(a.p,8),1)){if(ae(ad(a.p,16),1))aC(a);else if(ae(ad(a.p,16),9))aD(a);else throw Error("Field withot sqrt")}else if(ae(ad(a.p,8),5))aE(a);else throw Error("Field withot sqrt")}else ae(ad(a.p,4),3)&&aF(a)}else{let b=ad(_(a.p,a.m/2),4);1==b?aG(a):3==b?aH(a):aI(a)}}function aC(a){for(a.sqrt_q=_(a.p,a.m),a.sqrt_s=0,a.sqrt_t=X(a.sqrt_q,1);!R(a.sqrt_t);)a.sqrt_s=a.sqrt_s+1,a.sqrt_t=ac(a.sqrt_t,2);let b=a.one;for(;a.eq(b,a.one);){let c=a.random();a.sqrt_z=a.pow(c,a.sqrt_t),b=a.pow(a.sqrt_z,2**(a.sqrt_s-1))}a.sqrt_tm1d2=ac(X(a.sqrt_t,1),2),a.sqrt=function(a){let b=this;if(b.isZero(a))return b.zero;let c=b.pow(a,b.sqrt_tm1d2),d=b.pow(b.mul(b.square(c),a),2**(b.sqrt_s-1));if(b.eq(d,b.negone))return null;let e=b.sqrt_s,f=b.mul(a,c),g=b.mul(f,c),h=b.sqrt_z;for(;!b.eq(g,b.one);){let i=b.square(g),j=1;for(;!b.eq(i,b.one);)i=b.square(i),j++;c=h;for(let k=0;k<e-j-1;k++)c=b.square(c);h=b.square(c),g=b.mul(g,h),f=b.mul(f,c),e=j}return b.geq(f,b.zero)?f:b.neg(f)}}function aD(a){a.sqrt=function(){throw Error("Sqrt alg 4 not implemented")}}function aE(a){a.sqrt=function(){throw Error("Sqrt alg 3 not implemented")}}function aF(a){a.sqrt_q=_(a.p,a.m),a.sqrt_e1=ac(X(a.sqrt_q,3),4),a.sqrt=function(b){if(this.isZero(b))return this.zero;let c=this.pow(b,this.sqrt_e1),d=this.mul(this.square(c),b);if(this.eq(d,this.negone))return null;let e=this.mul(c,b);return a.geq(e,a.zero)?e:a.neg(e)}}function aG(a){a.sqrt=function(){throw Error("Sqrt alg 10 not implemented")}}function aH(a){a.sqrt_q=_(a.p,a.m/2),a.sqrt_e34=ac(X(a.sqrt_q,3),4),a.sqrt_e12=ac(X(a.sqrt_q,1),2),a.frobenius=function(b,c){return b%2==1?a.conjugate(c):c},a.sqrt=function(a){let b=this.pow(a,this.sqrt_e34),c=this.mul(this.square(b),a),d=this.mul(this.frobenius(1,c),c);if(this.eq(d,this.negone))return null;let e=this.mul(b,a),f;if(this.eq(c,this.negone))f=this.mul(e,[this.F.zero,this.F.one]);else{let g=this.pow(this.add(this.one,c),this.sqrt_e12);f=this.mul(g,e)}return this.geq(f,this.zero)?f:this.neg(f)}}function aI(a){a.sqrt=function(){throw Error("Sqrt alg 8 not implemented")}}function aJ(a,b,c,d,e){a[b]=a[b]+a[c]>>>0,a[e]=(a[e]^a[b])>>>0,a[e]=(a[e]<<16|a[e]>>>16&65535)>>>0,a[d]=a[d]+a[e]>>>0,a[c]=(a[c]^a[d])>>>0,a[c]=(a[c]<<12|a[c]>>>20&4095)>>>0,a[b]=a[b]+a[c]>>>0,a[e]=(a[e]^a[b])>>>0,a[e]=(a[e]<<8|a[e]>>>24&255)>>>0,a[d]=a[d]+a[e]>>>0,a[c]=(a[c]^a[d])>>>0,a[c]=(a[c]<<7|a[c]>>>25&127)>>>0}function aK(a){aJ(a,0,4,8,12),aJ(a,1,5,9,13),aJ(a,2,6,10,14),aJ(a,3,7,11,15),aJ(a,0,5,10,15),aJ(a,1,6,11,12),aJ(a,2,7,8,13),aJ(a,3,4,9,14)}class aL{constructor(a){a=a||[0,0,0,0,0,0,0,0],this.state=[1634760805,857760878,2036477234,1797285236,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],0,0,0,0],this.idx=16,this.buff=Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return W(Z(this.nextU32(),4294967296),this.nextU32())}nextBool(){return(1&this.nextU32())==1}update(){for(let a=0;a<16;a++)this.buff[a]=this.state[a];for(let b=0;b<10;b++)aK(this.buff);for(let c=0;c<16;c++)this.buff[c]=this.buff[c]+this.state[c]>>>0;if(this.idx=0,this.state[12]=this.state[12]+1>>>0,0==this.state[12])this.state[13]=this.state[13]+1>>>0,0==this.state[13]&&(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0))}}function aM(a){let b=new Uint8Array(a);if(void 0!==globalThis.crypto)globalThis.crypto.getRandomValues(b);else for(let c=0;c<a;c++)b[c]=4294967296*Math.random()>>>0;return b}let aN=null;function aO(){return aN||(aN=new aL(function(){let a=aM(32),b=new Uint32Array(a.buffer),c=[];for(let d=0;d<8;d++)c.push(b[d]);return c}()))}class aP{constructor(a,b,c){this.F=b,this.G=a,this.opMulGF=c;let d=b.sqrt_t||b.t,e=b.sqrt_s||b.s,f=b.one;for(;b.eq(b.pow(f,b.half),b.one);)f=b.add(f,b.one);this.w=Array(e+1),this.wi=Array(e+1),this.w[e]=this.F.pow(f,d),this.wi[e]=this.F.inv(this.w[e]);let g=e-1;for(;g>=0;)this.w[g]=this.F.square(this.w[g+1]),this.wi[g]=this.F.square(this.wi[g+1]),g--;this.roots=[],this._setRoots(Math.min(e,15))}_setRoots(a){for(let b=a;b>=0&&!this.roots[b];b--){let c=this.F.one,d=1<<b,e=Array(d);for(let f=0;f<d;f++)e[f]=c,c=this.F.mul(c,this.w[b]);this.roots[b]=e}}fft(a){if(a.length<=1)return a;let b=aQ(a.length-1)+1;this._setRoots(b);let c=1<<b;if(a.length!=c)throw Error("Size must be multiple of 2");let d=aR(this,a,b,0,1);return d}ifft(a){if(a.length<=1)return a;let b=aQ(a.length-1)+1;this._setRoots(b);let c=1<<b;if(a.length!=c)throw Error("Size must be multiple of 2");let d=aR(this,a,b,0,1),e=this.F.inv(this.F.mulScalar(this.F.one,c)),f=Array(c);for(let g=0;g<c;g++)f[g]=this.opMulGF(d[(c-g)%c],e);return f}}function aQ(a){return((4294901760&a)!=0?(a&=4294901760,16):0)|((4278255360&a)!=0?(a&=4278255360,8):0)|((4042322160&a)!=0?(a&=4042322160,4):0)|((3435973836&a)!=0?(a&=3435973836,2):0)|(2863311530&a)!=0}function aR(a,b,c,d,e){let f=1<<c;if(1==f)return[b[d]];if(2==f)return[a.G.add(b[d],b[d+e]),a.G.sub(b[d],b[d+e])];let g=f>>1,h=aR(a,b,c-1,d,2*e),i=aR(a,b,c-1,d+e,2*e),j=Array(f);for(let k=0;k<g;k++)j[k]=a.G.add(h[k],a.opMulGF(i[k],a.roots[c][k])),j[k+g]=a.G.sub(h[k],a.opMulGF(i[k],a.roots[c][k]));return j}var aS=Object.freeze({__proto__:null,default:aP});let aT="function"==typeof BigInt,aU;aU=aT?class{constructor(a){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(a),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=K(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);let b=this.negone>>this.one;this.nqr=this.two;let c=this.pow(this.nqr,b);for(;!this.eq(c,this.negone);)this.nqr=this.nqr+this.one,c=this.pow(this.nqr,b);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),aB(this),this.FFT=new aP(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(a,b){let c;if(b?16==b&&(c=BigInt("0x"+a)):c=BigInt(a),!(c<0))return c>=this.p?c%this.p:c;{let d=-c;return d>=this.p&&(d%=this.p),this.p-d}}add(a,b){let c=a+b;return c>=this.p?c-this.p:c}sub(a,b){return a>=b?a-b:this.p-b+a}neg(a){return a?this.p-a:a}mul(a,b){return a*b%this.p}mulScalar(a,b){return a*this.e(b)%this.p}square(a){return a*a%this.p}eq(a,b){return a==b}neq(a,b){return a!=b}lt(a,b){let c=a>this.half?a-this.p:a,d=b>this.half?b-this.p:b;return c<d}gt(a,b){let c=a>this.half?a-this.p:a,d=b>this.half?b-this.p:b;return c>d}leq(a,b){let c=a>this.half?a-this.p:a,d=b>this.half?b-this.p:b;return c<=d}geq(a,b){let c=a>this.half?a-this.p:a,d=b>this.half?b-this.p:b;return c>=d}div(a,b){return this.mul(a,this.inv(b))}idiv(a,b){if(!b)throw Error("Division by zero");return a/b}inv(a){if(!a)throw Error("Division by zero");let b=this.zero,c=this.p,d=this.one,e=a%this.p;for(;e;){let f=c/e;[b,d]=[d,b-f*d],[c,e]=[e,c-f*e]}return b<this.zero&&(b+=this.p),b}mod(a,b){return a%b}pow(a,b){return aA(this,a,b)}exp(a,b){return aA(this,a,b)}band(a,b){let c=a&b&this.mask;return c>=this.p?c-this.p:c}bor(a,b){let c=(a|b)&this.mask;return c>=this.p?c-this.p:c}bxor(a,b){let c=(a^b)&this.mask;return c>=this.p?c-this.p:c}bnot(a){let b=a^this.mask;return b>=this.p?b-this.p:b}shl(a,b){if(Number(b)<this.bitLength){let c=a<<b&this.mask;return c>=this.p?c-this.p:c}{let d=this.p-b;return Number(d)<this.bitLength?a>>d:this.zero}}shr(a,b){if(Number(b)<this.bitLength)return a>>b;{let c=this.p-b;if(!(Number(c)<this.bitLength))return 0;{let d=a<<c&this.mask;return d>=this.p?d-this.p:d}}}land(a,b){return a&&b?this.one:this.zero}lor(a,b){return a||b?this.one:this.zero}lnot(a){return a?this.zero:this.one}sqrt_old(a){if(a==this.zero)return this.zero;let b=this.pow(a,this.negone>>this.one);if(b!=this.one)return null;let c=this.s,d=this.nqr_to_t,e=this.pow(a,this.t),f=this.pow(a,this.add(this.t,this.one)>>this.one);for(;e!=this.one;){let g=this.square(e),h=1;for(;g!=this.one;)h++,g=this.square(g);let i=d;for(let j=0;j<c-h-1;j++)i=this.square(i);c=h,d=this.square(i),e=this.mul(e,d),f=this.mul(f,i)}return f>this.p>>this.one&&(f=this.neg(f)),f}normalize(a,b){if(!((a=BigInt(a,b))<0))return a>=this.p?a%this.p:a;{let c=-a;return c>=this.p&&(c%=this.p),this.p-c}}random(){let a=2*this.bitLength/8,b=this.zero;for(let c=0;c<a;c++)b=(b<<BigInt(8))+BigInt(aM(1)[0]);return b%this.p}toString(a,b){b=b||10;let c;if(a>this.half&&10==b){let d=this.p-a;c="-"+d.toString(b)}else c=a.toString(b);return c}isZero(a){return a==this.zero}fromRng(a){let b;do{b=this.zero;for(let c=0;c<this.n64;c++)b+=a.nextU64()<<BigInt(64*c);b&=this.mask}while(b>=this.p);return b*this.Ri%this.p}fft(a){return this.FFT.fft(a)}ifft(a){return this.FFT.ifft(a)}}:class{constructor(a){this.type="F1",this.one=k.default.one,this.zero=k.default.zero,this.p=k.default(a),this.m=1,this.negone=this.p.minus(k.default.one),this.two=k.default(2),this.half=this.p.shiftRight(1),this.bitLength=this.p.bitLength(),this.mask=k.default.one.shiftLeft(this.bitLength).minus(k.default.one),this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=k.default.one.shiftLeft(64*this.n64),this.Ri=this.inv(this.R);let b=this.negone.shiftRight(this.one);this.nqr=this.two;let c=this.pow(this.nqr,b);for(;!c.equals(this.negone);)this.nqr=this.nqr.add(this.one),c=this.pow(this.nqr,b);for(this.s=this.zero,this.t=this.negone;!this.t.isOdd();)this.s=this.s.add(this.one),this.t=this.t.shiftRight(this.one);this.nqr_to_t=this.pow(this.nqr,this.t),aB(this),this.FFT=new aS(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(a,b){let c=k.default(a,b);return this.normalize(c)}add(a,b){let c=a.add(b);return c.geq(this.p)&&(c=c.minus(this.p)),c}sub(a,b){return a.geq(b)?a.minus(b):this.p.minus(b.minus(a))}neg(a){return a.isZero()?a:this.p.minus(a)}mul(a,b){return a.times(b).mod(this.p)}mulScalar(a,b){return a.times(k.default(b)).mod(this.p)}square(a){return a.square().mod(this.p)}eq(a,b){return a.eq(b)}neq(a,b){return a.neq(b)}lt(a,b){let c=a.gt(this.half)?a.minus(this.p):a,d=b.gt(this.half)?b.minus(this.p):b;return c.lt(d)}gt(a,b){let c=a.gt(this.half)?a.minus(this.p):a,d=b.gt(this.half)?b.minus(this.p):b;return c.gt(d)}leq(a,b){let c=a.gt(this.half)?a.minus(this.p):a,d=b.gt(this.half)?b.minus(this.p):b;return c.leq(d)}geq(a,b){let c=a.gt(this.half)?a.minus(this.p):a,d=b.gt(this.half)?b.minus(this.p):b;return c.geq(d)}div(a,b){if(b.isZero())throw Error("Division by zero");return a.times(b.modInv(this.p)).mod(this.p)}idiv(a,b){if(b.isZero())throw Error("Division by zero");return a.divide(b)}inv(a){if(a.isZero())throw Error("Division by zero");return a.modInv(this.p)}mod(a,b){return a.mod(b)}pow(a,b){return a.modPow(b,this.p)}exp(a,b){return a.modPow(b,this.p)}band(a,b){return a.and(b).and(this.mask).mod(this.p)}bor(a,b){return a.or(b).and(this.mask).mod(this.p)}bxor(a,b){return a.xor(b).and(this.mask).mod(this.p)}bnot(a){return a.xor(this.mask).mod(this.p)}shl(a,b){if(b.lt(this.bitLength))return a.shiftLeft(b).and(this.mask).mod(this.p);{let c=this.p.minus(b);return c.lt(this.bitLength)?this.shr(a,c):k.default.zero}}shr(a,b){if(b.lt(this.bitLength))return a.shiftRight(b);{let c=this.p.minus(b);return c.lt(this.bitLength)?this.shl(a,c):k.default.zero}}land(a,b){return a.isZero()||b.isZero()?k.default.zero:k.default.one}lor(a,b){return a.isZero()&&b.isZero()?k.default.zero:k.default.one}lnot(a){return a.isZero()?k.default.one:k.default.zero}sqrt_old(a){if(a.equals(this.zero))return this.zero;let b=this.pow(a,this.negone.shiftRight(this.one));if(!b.equals(this.one))return null;let c=parseInt(this.s),d=this.nqr_to_t,e=this.pow(a,this.t),f=this.pow(a,this.add(this.t,this.one).shiftRight(this.one));for(;!e.equals(this.one);){let g=this.square(e),h=1;for(;!g.equals(this.one);)h++,g=this.square(g);let i=d;for(let j=0;j<c-h-1;j++)i=this.square(i);c=h,d=this.square(i),e=this.mul(e,d),f=this.mul(f,i)}return f.greater(this.p.shiftRight(this.one))&&(f=this.neg(f)),f}normalize(a){return(a=k.default(a)).isNegative()?this.p.minus(a.abs().mod(this.p)):a.mod(this.p)}random(){let a=k.default(0),b=k.default(this.p.square());for(;!b.isZero();)a=a.shiftLeft(8).add(k.default(aM(1)[0])),b=b.shiftRight(8);return a.mod(this.p)}toString(a,b){b=b||10;let c;if(a.lesserOrEquals(this.p.shiftRight(k.default(1)))||10!=b)c=a.toString(b);else{let d=this.p.minus(a);c="-"+d.toString(b)}return c}isZero(a){return a.isZero()}fromRng(a){let b;do{b=k.default(0);for(let c=0;c<this.n64;c++)b=b.add(b,a.nextU64().shiftLeft(64*c));b=b.and(this.mask)}while(b.geq(this.p));return b.times(this.Ri).mod(this.q)}fft(a){return this.FFT.fft(a)}ifft(a){return this.FFT.ifft(a)}};class aV extends aU{toRprLE(a,b,c){z(a,b,c,8*this.n64)}toRprBE(a,b,c){A(a,b,c,8*this.n64)}toRprBEM(a,b,c){return this.toRprBE(a,b,this.mul(this.R,c))}toRprLEM(a,b,c){return this.toRprLE(a,b,this.mul(this.R,c))}fromRprLE(a,b){return B(a,b,this.n8)}fromRprBE(a,b){return C(a,b,this.n8)}fromRprLEM(a,b){return this.mul(this.fromRprLE(a,b),this.Ri)}fromRprBEM(a,b){return this.mul(this.fromRprBE(a,b),this.Ri)}toObject(a){return a}}function aW(a,b){if(Array.isArray(b)){for(let c=b.length-1;c>=0;c--)if(!a.F.isZero(b[c]))return aW(a.F,b[c]);return 0}{let d=a.neg(b);return ah(b,d)}}function aX(a){if("bigint"==typeof a|| void 0!==a.eq)return a.toString(10);if(a instanceof Uint8Array)return B(a,0);if(Array.isArray(a))return a.map(aX);{if("object"!=typeof a)return a;let b={},c=Object.keys(a);return c.forEach(c=>{b[c]=aX(a[c])}),b}}function aY(a){if("string"==typeof a&&/^[0-9]+$/.test(a)||"string"==typeof a&&/^0x[0-9a-fA-F]+$/.test(a))return BigInt(a);if(Array.isArray(a))return a.map(aY);{if("object"!=typeof a)return a;if(null===a)return null;let b={},c=Object.keys(a);return c.forEach(c=>{b[c]=aY(a[c])}),b}}function aZ(a,b){if("bigint"==typeof b|| void 0!==b.eq)return b.toString(10);if(b instanceof Uint8Array)return a.toString(a.e(b));if(Array.isArray(b))return b.map(aZ.bind(this,a));{if("object"!=typeof b)return b;let c={},d=Object.keys(b);return d.forEach(d=>{c[d]=aZ(a,b[d])}),c}}function a$(a,b){if("string"==typeof b&&/^[0-9]+$/.test(b)||"string"==typeof b&&/^0x[0-9a-fA-F]+$/.test(b))return a.e(b);if(Array.isArray(b))return b.map(a$.bind(this,a));{if("object"!=typeof b)return b;if(null===b)return null;let c={},d=Object.keys(b);return d.forEach(d=>{c[d]=a$(a,b[d])}),c}}var a_=Object.freeze({__proto__:null,stringifyBigInts:aX,unstringifyBigInts:aY,beBuff2int:function(a){let b=BigInt(0),c=a.length,d=0,e=new DataView(a.buffer,a.byteOffset,a.byteLength);for(;c>0;)c>=4?(c-=4,b+=BigInt(e.getUint32(c))<<BigInt(8*d),d+=4):c>=2?(c-=2,b+=BigInt(e.getUint16(c))<<BigInt(8*d),d+=2):(c-=1,b+=BigInt(e.getUint8(c))<<BigInt(8*d),d+=1);return b},beInt2Buff:function(a,b){let c=a,d=new Uint8Array(b),e=new DataView(d.buffer),f=b;for(;f>0;)f-4>=0?(f-=4,e.setUint32(f,Number(c&BigInt(4294967295))),c>>=BigInt(32)):f-2>=0?(f-=2,e.setUint16(f,Number(c&BigInt(65535))),c>>=BigInt(16)):(f-=1,e.setUint8(f,Number(c&BigInt(255))),c>>=BigInt(8));if(c)throw Error("Number does not fit in this length");return d},leBuff2int:function(a){let b=BigInt(0),c=0,d=new DataView(a.buffer,a.byteOffset,a.byteLength);for(;c<a.length;)c+4<=a.length?(b+=BigInt(d.getUint32(c,!0))<<BigInt(8*c),c+=4):c+4<=a.length?(b+=BigInt(d.getUint16(c,!0))<<BigInt(8*c),c+=2):(b+=BigInt(d.getUint8(c,!0))<<BigInt(8*c),c+=1);return b},leInt2Buff:function(a,b){let c=a;void 0===b&&0==(b=Math.floor((K(a)-1)/8)+1)&&(b=1);let d=new Uint8Array(b),e=new DataView(d.buffer),f=0;for(;f<b;)f+4<=b?(e.setUint32(f,Number(c&BigInt(4294967295)),!0),f+=4,c>>=BigInt(32)):f+2<=b?(e.setUint16(Number(f,c&BigInt(65535)),!0),f+=2,c>>=BigInt(16)):(e.setUint8(Number(f,c&BigInt(255)),!0),f+=1,c>>=BigInt(8));if(c)throw Error("Number does not fit in this length");return d},stringifyFElements:aZ,unstringifyFElements:a$});function a0(a){if("bigint"==typeof a|| void 0!==a.eq)return a.toString(10);if(Array.isArray(a))return a.map(a0);if("object"!=typeof a)return a;{let b={},c=Object.keys(a);return c.forEach(c=>{b[c]=a0(a[c])}),b}}function a1(a){if("string"==typeof a&&/^[0-9]+$/.test(a)||"string"==typeof a&&/^0x[0-9a-fA-F]+$/.test(a))return k.default(a);if(Array.isArray(a))return a.map(a1);{if("object"!=typeof a)return a;let b={},c=Object.keys(a);return c.forEach(c=>{b[c]=a1(a[c])}),b}}var a2=Object.freeze({__proto__:null,stringifyBigInts:a0,unstringifyBigInts:a1,beBuff2int:function(a){let b=k.default.zero;for(let c=0;c<a.length;c++){let d=k.default(a[a.length-c-1]);b=b.add(d.shiftLeft(8*c))}return b},beInt2Buff:function(a,b){let c=a,d=b-1,e=new Uint8Array(b);for(;c.gt(k.default.zero)&&d>=0;){let f=Number(c.and(k.default("255")));e[d]=f,d--,c=c.shiftRight(8)}if(!c.eq(k.default.zero))throw Error("Number does not fit in this length");return e},leBuff2int:function(a){let b=k.default.zero;for(let c=0;c<a.length;c++){let d=k.default(a[c]);b=b.add(d.shiftLeft(8*c))}return b},leInt2Buff:function(a,b){let c=a,d=0,e=new Uint8Array(b);for(;c.gt(k.default.zero)&&d<e.length;){let f=Number(c.and(k.default(255)));e[d]=f,d++,c=c.shiftRight(8)}if(!c.eq(k.default.zero))throw Error("Number does not fit in this length");return e}});let a3={},a4="function"==typeof BigInt;a4?Object.assign(a3,a_):Object.assign(a3,a2);let a5=[];for(let a6=0;a6<256;a6++)a5[a6]=a7(a6,8);function a7(a,b){let c=0,d=a;for(let e=0;e<b;e++)c<<=1,c|=1&d,d>>=1;return c}a3.bitReverse=function(a,b){return(a5[a>>>24]|a5[a>>>16&255]<<8|a5[a>>>8&255]<<16|a5[255&a]<<24)>>>32-b},a3.log2=function(a){return((4294901760&a)!=0?(a&=4294901760,16):0)|((4278255360&a)!=0?(a&=4278255360,8):0)|((4042322160&a)!=0?(a&=4042322160,4):0)|((3435973836&a)!=0?(a&=3435973836,2):0)|(2863311530&a)!=0},a3.buffReverseBits=function(a,b){let c=a.byteLength/b,d=a3.log2(c);if(c!=1<<d)throw Error("Invalid number of pointers");for(let e=0;e<c;e++){let f=a3.bitReverse(e,d);if(e>f){let g=a.slice(e*b,(e+1)*b);a.set(a.slice(f*b,(f+1)*b),e*b),a.set(g,f*b)}}},a3.array2buffer=function(a,b){let c=new Uint8Array(b*a.length);for(let d=0;d<a.length;d++)c.set(a[d],d*b);return c},a3.buffer2array=function(a,b){let c=a.byteLength/b,d=Array(c);for(let e=0;e<c;e++)d[e]=a.slice(e*b,e*b+b);return d};let{bitReverse:a8,log2:a9,buffReverseBits:ba,stringifyBigInts:bb,unstringifyBigInts:bc,beBuff2int:bd,beInt2Buff:be,leBuff2int:bf,leInt2Buff:bg,array2buffer:bh,buffer2array:bi,stringifyFElements:bj,unstringifyFElements:bk}=a3;var bl=Object.freeze({__proto__:null,bitReverse:a8,log2:a9,buffReverseBits:ba,stringifyBigInts:bb,unstringifyBigInts:bc,beBuff2int:bd,beInt2Buff:be,leBuff2int:bf,leInt2Buff:bg,array2buffer:bh,buffer2array:bi,stringifyFElements:bj,unstringifyFElements:bk});let bm=1073741824;class bn{constructor(a){this.buffers=[],this.byteLength=a;for(let b=0;b<a;b+=bm){let c=Math.min(a-b,bm);this.buffers.push(new Uint8Array(c))}}slice(a,b){void 0===b&&(b=this.byteLength),void 0===a&&(a=0);let c=b-a,d=Math.floor(a/bm),e=Math.floor((a+c-1)/bm);if(d==e||0==c)return this.buffers[d].slice(a%bm,a%bm+c);let f,g=d,h=a%bm,i=c;for(;i>0;){let j=h+i>bm?bm-h:i,k=new Uint8Array(this.buffers[g].buffer,this.buffers[g].byteOffset+h,j);if(j==c)return k.slice();f||(f=c<=bm?new Uint8Array(c):new bn(c)),f.set(k,c-i),i-=j,g++,h=0}return f}set(a,b){void 0===b&&(b=0);let c=a.byteLength;if(0==c)return;let d=Math.floor(b/bm),e=Math.floor((b+c-1)/bm);if(d==e)return a instanceof bn&&1==a.buffers.length?this.buffers[d].set(a.buffers[0],b%bm):this.buffers[d].set(a,b%bm);let f=d,g=b%bm,h=c;for(;h>0;){let i=g+h>bm?bm-g:h,j=a.slice(c-h,c-h+i),k=new Uint8Array(this.buffers[f].buffer,this.buffers[f].byteOffset+g,i);k.set(j),h-=i,f++,g=0}}}function bo(a,b,c,d){return async function(e){let f=Math.floor(e.byteLength/c);if(f*c!==e.byteLength)throw Error("Invalid buffer size");let g=Math.floor(f/a.concurrency),h=[];for(let i=0;i<a.concurrency;i++){let j;if(0==(j=i<a.concurrency-1?g:f-i*g))continue;let k=e.slice(i*g*c,i*g*c+j*c),l=[{cmd:"ALLOCSET",var:0,buff:k},{cmd:"ALLOC",var:1,len:d*j},{cmd:"CALL",fnName:b,params:[{var:0},{val:j},{var:1}]},{cmd:"GET",out:0,var:1,len:d*j},];h.push(a.queueAction(l))}let m=await Promise.all(h),n;n=e instanceof bn?new bn(f*d):new Uint8Array(f*d);let o=0;for(let p=0;p<m.length;p++)n.set(m[p][0],o),o+=m[p][0].byteLength;return n}}class bp{constructor(a,b,c,d){if(this.tm=a,this.prefix=b,this.p=d,this.n8=c,this.type="F1",this.m=1,this.half=O(d,G),this.bitLength=K(d),this.mask=X(N(G,this.bitLength),G),this.pOp1=a.alloc(c),this.pOp2=a.alloc(c),this.pOp3=a.alloc(c),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(c/8),this.n32=Math.floor(c/4),8*this.n64!=this.n8)throw Error("n8 must be a multiple of 8");this.half=O(this.p,G),this.nqr=this.two;let e=this.exp(this.nqr,this.half);for(;!this.eq(e,this.negone);)this.nqr=this.add(this.nqr,this.one),e=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let f=X(this.p,G);for(;!R(f);)this.s=this.s+1,f=O(f,G);this.w=[],this.w[this.s]=this.exp(this.nqr,f);for(let g=this.s-1;g>=0;g--)this.w[g]=this.square(this.w[g+1]);if(!this.eq(this.w[0],this.one))throw Error("Error calculating roots of unity");this.batchToMontgomery=bo(a,b+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=bo(a,b+"_batchFromMontgomery",this.n8,this.n8)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=E(I(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(a){return this.op1Bool("_isNegative",a)}e(a,b){if(a instanceof Uint8Array)return a;let c=I(a,b);L(c)?(c=Y(c),ah(c,this.p)&&(c=ad(c,this.p)),c=X(this.p,c)):ah(c,this.p)&&(c=ad(c,this.p));let d=bg(c,this.n8);return this.toMontgomery(d)}toString(a,b){let c=this.fromMontgomery(a),d=B(c,0);return D(d,b)}fromRng(a){let b,c=new Uint8Array(this.n8);do{b=F;for(let d=0;d<this.n64;d++)b=W(b,N(a.nextU64(),64*d));b=ak(b,this.mask)}while(aj(b,this.p));return z(c,0,b,this.n8),c}random(){return this.fromRng(aO())}toObject(a){let b=this.fromMontgomery(a);return B(b,0)}fromObject(a){let b=new Uint8Array(this.n8);return z(b,0,a,this.n8),this.toMontgomery(b)}toRprLE(a,b,c){a.set(this.fromMontgomery(c),b)}toRprBE(a,b,c){let d=this.fromMontgomery(c);for(let e=0;e<this.n8/2;e++){let f=d[e];d[e]=d[this.n8-1-e],d[this.n8-1-e]=f}a.set(d,b)}fromRprLE(a,b){b=b||0;let c=a.slice(b,b+this.n8);return this.toMontgomery(c)}async batchInverse(a){let b=!1,c=this.n8,d=this.n8;Array.isArray(a)?(a=bh(a,c),b=!0):a=a.slice(0,a.byteLength);let e=Math.floor(a.byteLength/c);if(e*c!==a.byteLength)throw Error("Invalid buffer size");let f=Math.floor(e/this.tm.concurrency),g=[];for(let h=0;h<this.tm.concurrency;h++){let i;if(0==(i=h<this.tm.concurrency-1?f:e-h*f))continue;let j=a.slice(h*f*c,h*f*c+i*c),k=[{cmd:"ALLOCSET",var:0,buff:j},{cmd:"ALLOC",var:1,len:d*i},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:c},{val:i},{var:1},{val:d},]},{cmd:"GET",out:0,var:1,len:d*i},];g.push(this.tm.queueAction(k))}let l=await Promise.all(g),m;m=a instanceof bn?new bn(e*d):new Uint8Array(e*d);let n=0;for(let o=0;o<l.length;o++)m.set(l[o][0],n),n+=l[o][0].byteLength;return b?bi(m,d):m}}class bq{constructor(a,b,c){this.tm=a,this.prefix=b,this.F=c,this.type="F2",this.m=2*c.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=a.alloc(2*c.n8),this.pOp2=a.alloc(2*c.n8),this.pOp3=a.alloc(2*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=a.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=a.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){return this.op2("_add",a,b)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}mul1(a,b){return this.op2("_mul1",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=E(I(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&2==a.length){let c=this.F.e(a[0],b),d=this.F.e(a[1],b),e=new Uint8Array(2*this.F.n8);return e.set(c),e.set(d,2*this.F.n8),e}throw Error("invalid F2")}toString(a,b){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8),b);return`[${c}, ${d}]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a),d=new Uint8Array(2*this.F.n8);return d.set(b),d.set(c,this.F.n8),d}random(){return this.fromRng(aO())}toObject(a){let b=this.F.toObject(a.slice(0,this.F.n8)),c=this.F.toObject(a.slice(this.F.n8,2*this.F.n8));return[b,c]}fromObject(a){let b=new Uint8Array(2*this.F.n8),c=this.F.fromObject(a[0]),d=this.F.fromObject(a[1]);return b.set(c),b.set(d,this.F.n8),b}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8)}}class br{constructor(a,b,c){this.tm=a,this.prefix=b,this.F=c,this.type="F3",this.m=3*c.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=a.alloc(3*c.n8),this.pOp2=a.alloc(3*c.n8),this.pOp3=a.alloc(3*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=a.getBuff(this.pOp1,this.n8),this.tm.instance.exports[b+"_one"](this.pOp1),this.one=a.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}eq(a,b){return this.op2Bool("_eq",a,b)}isZero(a){return this.op1Bool("_isZero",a)}add(a,b){return this.op2("_add",a,b)}sub(a,b){return this.op2("_sub",a,b)}neg(a){return this.op1("_neg",a)}inv(a){return this.op1("_inverse",a)}isNegative(a){return this.op1Bool("_isNegative",a)}toMontgomery(a){return this.op1("_toMontgomery",a)}fromMontgomery(a){return this.op1("_fromMontgomery",a)}mul(a,b){return this.op2("_mul",a,b)}div(a,b){return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(a){return this.op1("_square",a)}isSquare(a){return this.op1Bool("_isSquare",a)}sqrt(a){return this.op1("_sqrt",a)}exp(a,b){return b instanceof Uint8Array||(b=E(I(b))),this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(a,b){if(a instanceof Uint8Array)return a;if(Array.isArray(a)&&3==a.length){let c=this.F.e(a[0],b),d=this.F.e(a[1],b),e=this.F.e(a[2],b),f=new Uint8Array(3*this.F.n8);return f.set(c),f.set(d,this.F.n8),f.set(e,2*this.F.n8),f}throw Error("invalid F3")}toString(a,b){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8,2*this.F.n8),b),e=this.F.toString(a.slice(2*this.F.n8),b);return`[${c}, ${d}, ${e}]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a),d=this.F.fromRng(a),e=new Uint8Array(3*this.F.n8);return e.set(b),e.set(c,this.F.n8),e.set(d,2*this.F.n8),e}random(){return this.fromRng(aO())}toObject(a){let b=this.F.toObject(a.slice(0,this.F.n8)),c=this.F.toObject(a.slice(this.F.n8,2*this.F.n8)),d=this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8));return[b,c,d]}fromObject(a){let b=new Uint8Array(3*this.F.n8),c=this.F.fromObject(a[0]),d=this.F.fromObject(a[1]),e=this.F.fromObject(a[2]);return b.set(c),b.set(d,this.F.n8),b.set(e,2*this.F.n8),b}c1(a){return a.slice(0,this.F.n8)}c2(a){return a.slice(this.F.n8,2*this.F.n8)}c3(a){return a.slice(2*this.F.n8)}}class bs{constructor(a,b,c,d,e,f){this.tm=a,this.prefix=b,this.F=c,this.pOp1=a.alloc(3*c.n8),this.pOp2=a.alloc(3*c.n8),this.pOp3=a.alloc(3*c.n8),this.tm.instance.exports[b+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*c.n8),this.tm.instance.exports[b+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*c.n8),this.one=this.tm.getBuff(d,3*c.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(d,2*c.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(e,c.n8),f&&(this.cofactor=E(f)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=bo(a,b+"_batchLEMtoC",2*c.n8,c.n8),this.batchLEMtoU=bo(a,b+"_batchLEMtoU",2*c.n8,2*c.n8),this.batchCtoLEM=bo(a,b+"_batchCtoLEM",c.n8,2*c.n8),this.batchUtoLEM=bo(a,b+"_batchUtoLEM",2*c.n8,2*c.n8),this.batchToJacobian=bo(a,b+"_batchToJacobian",2*c.n8,3*c.n8),this.batchToAffine=bo(a,b+"_batchToAffine",3*c.n8,2*c.n8)}op2(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(a,b,c){return this.tm.setBuff(this.pOp1,b),this.tm.setBuff(this.pOp2,c),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp2,this.pOp3)}op1(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(a,b){return this.tm.setBuff(this.pOp1,b),this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(a,b){return this.tm.setBuff(this.pOp1,b),!!this.tm.instance.exports[this.prefix+a](this.pOp1,this.pOp3)}add(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_add",a,b);if(b.byteLength==2*this.F.n8)return this.op2("_addMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_addMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2("_addAffine",a,b)}throw Error("invalid point size")}sub(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_sub",a,b);if(b.byteLength==2*this.F.n8)return this.op2("_subMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2("_subMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2("_subAffine",a,b)}throw Error("invalid point size")}neg(a){if(a.byteLength==3*this.F.n8)return this.op1("_neg",a);if(a.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",a);throw Error("invalid point size")}double(a){if(a.byteLength==3*this.F.n8)return this.op1("_double",a);if(a.byteLength==2*this.F.n8)return this.op1("_doubleAffine",a);throw Error("invalid point size")}isZero(a){if(a.byteLength==3*this.F.n8)return this.op1Bool("_isZero",a);if(a.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",a);throw Error("invalid point size")}timesScalar(a,b){b instanceof Uint8Array||(b=E(I(b)));let c;if(a.byteLength==3*this.F.n8)c=this.prefix+"_timesScalar";else if(a.byteLength==2*this.F.n8)c=this.prefix+"_timesScalarAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[c](this.pOp1,this.pOp2,b.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(a,b){let c;if(a.byteLength==3*this.F.n8)c=this.prefix+"_timesFr";else if(a.byteLength==2*this.F.n8)c=this.prefix+"_timesFrAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,a),this.tm.setBuff(this.pOp2,b),this.tm.instance.exports[c](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(a,b){if(a.byteLength==3*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2bool("_eq",a,b);if(b.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",a,b);throw Error("invalid point size")}if(a.byteLength==2*this.F.n8){if(b.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",b,a);if(b.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",a,b)}throw Error("invalid point size")}toAffine(a){if(a.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",a);if(a.byteLength==2*this.F.n8)return a;throw Error("invalid point size")}toJacobian(a){if(a.byteLength==3*this.F.n8)return a;if(a.byteLength==2*this.F.n8)return this.op1("_toJacobian",a);throw Error("invalid point size")}toRprUncompressed(a,b,c){if(this.tm.setBuff(this.pOp1,c),c.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(c.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,2*this.F.n8);a.set(d,b)}fromRprUncompressed(a,b){let c=a.slice(b,b+2*this.F.n8);return this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(a,b,c){if(this.tm.setBuff(this.pOp1,c),c.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(c.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,this.F.n8);a.set(d,b)}fromRprCompressed(a,b){let c=a.slice(b,b+this.F.n8);return this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(a){let b=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(b,0,a),b}toRprLEM(a,b,c){if(c.byteLength==2*this.F.n8){a.set(c,b);return}if(c.byteLength==3*this.F.n8){this.tm.setBuff(this.pOp1,c),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);let d=this.tm.getBuff(this.pOp1,2*this.F.n8);a.set(d,b)}else throw Error("invalid point size")}fromRprLEM(a,b){return b=b||0,a.slice(b,b+2*this.F.n8)}toString(a,b){if(a.byteLength==3*this.F.n8){let c=this.F.toString(a.slice(0,this.F.n8),b),d=this.F.toString(a.slice(this.F.n8,2*this.F.n8),b),e=this.F.toString(a.slice(2*this.F.n8),b);return`[ ${c}, ${d}, ${e} ]`}if(a.byteLength==2*this.F.n8){let f=this.F.toString(a.slice(0,this.F.n8),b),g=this.F.toString(a.slice(this.F.n8),b);return`[ ${f}, ${g} ]`}throw Error("invalid point size")}isValid(a){if(this.isZero(a))return!0;let b=this.F,c=this.toAffine(a),d=c.slice(0,this.F.n8),e=c.slice(this.F.n8,2*this.F.n8),f=b.add(b.mul(b.square(d),d),this.b),g=b.square(e);return b.eq(f,g)}fromRng(a){let b=this.F,c=[],d,e;do c[0]=b.fromRng(a),d=a.nextBool(),e=b.add(b.mul(b.square(c[0]),c[0]),this.b);while(!b.isSquare(e));c[1]=b.sqrt(e);let f=b.isNegative(c[1]);d^f&&(c[1]=b.neg(c[1]));let g=new Uint8Array(2*this.F.n8);return g.set(c[0]),g.set(c[1],this.F.n8),this.cofactor&&(g=this.timesScalar(g,this.cofactor)),g}toObject(a){if(this.isZero(a))return[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero),];let b=this.F.toObject(a.slice(0,this.F.n8)),c=this.F.toObject(a.slice(this.F.n8,2*this.F.n8)),d;return[b,c,a.byteLength==3*this.F.n8?this.F.toObject(a.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one)]}fromObject(a){let b=this.F.fromObject(a[0]),c=this.F.fromObject(a[1]),d;if(d=3==a.length?this.F.fromObject(a[2]):this.F.one,this.F.isZero(d,this.F.one))return this.zeroAffine;if(this.F.eq(d,this.F.one)){let e=new Uint8Array(2*this.F.n8);return e.set(b),e.set(c,this.F.n8),e}{let f=new Uint8Array(3*this.F.n8);return f.set(b),f.set(c,this.F.n8),f.set(d,2*this.F.n8),f}}e(a){return a instanceof Uint8Array?a:this.fromObject(a)}x(a){let b=this.toAffine(a);return b.slice(0,this.F.n8)}y(a){let b=this.toAffine(a);return b.slice(this.F.n8)}}function bt(a){let b,c;async function d(a){let d=new Uint8Array(a.code),e=await WebAssembly.compile(d);c=new WebAssembly.Memory({initial:a.init,maximum:32767}),b=await WebAssembly.instantiate(e,{env:{memory:c}})}function e(a){let b=new Uint32Array(c.buffer,0,1);for(;3&b[0];)b[0]++;let d=b[0];if(b[0]+=a,b[0]+a>c.buffer.byteLength){let e=c.buffer.byteLength/65536,f=Math.floor((b[0]+a)/65536)+1;f>32767&&(f=32767),c.grow(f-e)}return d}function f(a){let b=e(a.byteLength);return h(b,a),b}function g(a,b){let d=new Uint8Array(c.buffer);return new Uint8Array(d.buffer,d.byteOffset+a,b)}function h(a,b){let d=new Uint8Array(c.buffer);d.set(new Uint8Array(b),a)}function i(a){if("INIT"==a[0].cmd)return d(a[0]);let i={vars:[],out:[]},j=new Uint32Array(c.buffer,0,1),k=j[0];for(let l=0;l<a.length;l++)switch(a[l].cmd){case"ALLOCSET":i.vars[a[l].var]=f(a[l].buff);break;case"ALLOC":i.vars[a[l].var]=e(a[l].len);break;case"SET":h(i.vars[a[l].var],a[l].buff);break;case"CALL":{let m=[];for(let n=0;n<a[l].params.length;n++){let o=a[l].params[n];void 0!==o.var?m.push(i.vars[o.var]+(o.offset||0)):void 0!==o.val&&m.push(o.val)}b.exports[a[l].fnName](...m);break}case"GET":i.out[a[l].out]=g(i.vars[a[l].var],a[l].len).slice();break;default:throw Error("Invalid cmd")}let p=new Uint32Array(c.buffer,0,1);return p[0]=k,i.out}return a&&(a.onmessage=function(b){let c;if("INIT"==(c=b.data?b.data:b)[0].cmd)d(c[0]).then(function(){a.postMessage(c.result)});else if("TERMINATE"==c[0].cmd)a.close();else{let e=i(c);a.postMessage(e)}}),i}class bu{constructor(){this.promise=new Promise((a,b)=>{this.reject=b,this.resolve=a})}}let bv=globalThis.btoa(d="("+bt.toString()+")(self)"),bw="data:application/javascript;base64,"+bv;async function bx(a,b){let c=new by;c.memory=new WebAssembly.Memory({initial:25}),c.u8=new Uint8Array(c.memory.buffer),c.u32=new Uint32Array(c.memory.buffer);let d=await WebAssembly.compile(a.code);if(c.instance=await WebAssembly.instantiate(d,{env:{memory:c.memory}}),c.singleThread=b,c.initalPFree=c.u32[0],c.pq=a.pq,c.pr=a.pr,c.pG1gen=a.pG1gen,c.pG1zero=a.pG1zero,c.pG2gen=a.pG2gen,c.pG2zero=a.pG2zero,c.pOneT=a.pOneT,b)c.code=a.code,c.taskManager=bt(),await c.taskManager([{cmd:"INIT",init:25,code:c.code.slice()}]),c.concurrency=1;else{c.workers=[],c.pendingDeferreds=[],c.working=[];let e;0==(e="object"==typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:l.default.cpus().length)&&(e=2),e>64&&(e=64),c.concurrency=e;for(let f=0;f<e;f++)c.workers[f]=new m.default(bw),c.workers[f].addEventListener("message",j(f)),c.working[f]=!1;let g=[];for(let h=0;h<c.workers.length;h++){let i=a.code.slice();g.push(c.postAction(h,[{cmd:"INIT",init:25,code:i}],[i.buffer]))}await Promise.all(g)}return c;function j(a){return function(b){let d;d=b&&b.data?b.data:b,c.working[a]=!1,c.pendingDeferreds[a].resolve(d),c.processWorks()}}}class by{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(a,b,c,d){if(this.working[a])throw Error("Posting a job t a working worker");return this.working[a]=!0,this.pendingDeferreds[a]=d||new bu,this.workers[a].postMessage(b,c),this.pendingDeferreds[a].promise}processWorks(){for(let a=0;a<this.workers.length&&this.actionQueue.length>0;a++)if(!1==this.working[a]){let b=this.actionQueue.shift();this.postAction(a,b.data,b.transfers,b.deferred)}}queueAction(a,b){let c=new bu;if(this.singleThread){let d=this.taskManager(a);c.resolve(d)}else this.actionQueue.push({data:a,transfers:b,deferred:c}),this.processWorks();return c.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(a){let b=this.alloc(a.byteLength);return this.setBuff(b,a),b}getBuff(a,b){return this.u8.slice(a,a+b)}setBuff(a,b){this.u8.set(new Uint8Array(b),a)}alloc(a){for(;3&this.u32[0];)this.u32[0]++;let b=this.u32[0];return this.u32[0]+=a,b}async terminate(){var a;for(let b=0;b<this.workers.length;b++)this.workers[b].postMessage([{cmd:"TERMINATE"}]);await new Promise(a=>setTimeout(a,200))}}function bz(a,b){let c=a[b],d=a.Fr,e=a.tm;a[b].batchApplyKey=async function(a,f,g,h,i){h=h||"affine",i=i||"affine";let j,k,l,m,n;if("G1"==b)"jacobian"==h?(l=3*c.F.n8,j="g1m_batchApplyKey"):(l=2*c.F.n8,j="g1m_batchApplyKeyMixed"),m=3*c.F.n8,"jacobian"==i?n=3*c.F.n8:(k="g1m_batchToAffine",n=2*c.F.n8);else if("G2"==b)"jacobian"==h?(l=3*c.F.n8,j="g2m_batchApplyKey"):(l=2*c.F.n8,j="g2m_batchApplyKeyMixed"),m=3*c.F.n8,"jacobian"==i?n=3*c.F.n8:(k="g2m_batchToAffine",n=2*c.F.n8);else if("Fr"==b)j="frm_batchApplyKey",l=c.n8,m=c.n8,n=c.n8;else throw Error("Invalid group: "+b);let o=Math.floor(a.byteLength/l),p=Math.floor(o/e.concurrency),q=[];g=d.e(g);let r=d.e(f);for(let s=0;s<e.concurrency;s++){let t;if(0==(t=s<e.concurrency-1?p:o-s*p))continue;let u=[];u.push({cmd:"ALLOCSET",var:0,buff:a.slice(s*p*l,s*p*l+t*l)}),u.push({cmd:"ALLOCSET",var:1,buff:r}),u.push({cmd:"ALLOCSET",var:2,buff:g}),u.push({cmd:"ALLOC",var:3,len:t*Math.max(m,n)}),u.push({cmd:"CALL",fnName:j,params:[{var:0},{val:t},{var:1},{var:2},{var:3}]}),k&&u.push({cmd:"CALL",fnName:k,params:[{var:3},{val:t},{var:3},]}),u.push({cmd:"GET",out:0,var:3,len:t*n}),q.push(e.queueAction(u)),r=d.mul(r,d.exp(g,t))}let v=await Promise.all(q),w;w=a instanceof bn?new bn(o*n):new Uint8Array(o*n);let x=0;for(let y=0;y<v.length;y++)w.set(v[y][0],x),x+=v[y][0].byteLength;return w}}let bA=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function bB(a,b){let c=a[b],d=c.tm;async function e(a,d,e,f,g){if(!(a instanceof Uint8Array))throw f&&f.error(`${g} _multiExpChunk buffBases is not Uint8Array`),Error(`${g} _multiExpChunk buffBases is not Uint8Array`);if(!(d instanceof Uint8Array))throw f&&f.error(`${g} _multiExpChunk buffScalars is not Uint8Array`),Error(`${g} _multiExpChunk buffScalars is not Uint8Array`);e=e||"affine";let h,i;if("G1"==b)"affine"==e?(i="g1m_multiexpAffine_chunk",h=2*c.F.n8):(i="g1m_multiexp_chunk",h=3*c.F.n8);else if("G2"==b)"affine"==e?(i="g2m_multiexpAffine_chunk",h=2*c.F.n8):(i="g2m_multiexp_chunk",h=3*c.F.n8);else throw Error("Invalid group");let j=Math.floor(a.byteLength/h);if(0==j)return c.zero;let k=Math.floor(d.byteLength/j);if(k*j!=d.byteLength)throw Error("Scalar size does not match");let l=bA[a9(j)],m=Math.floor((8*k-1)/l)+1,n=[];for(let o=0;o<m;o++){let p=[{cmd:"ALLOCSET",var:0,buff:a},{cmd:"ALLOCSET",var:1,buff:d},{cmd:"ALLOC",var:2,len:3*c.F.n8},{cmd:"CALL",fnName:i,params:[{var:0},{var:1},{val:k},{val:j},{val:o*l},{val:Math.min(8*k-o*l,l)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*c.F.n8}];n.push(c.tm.queueAction(p))}let q=await Promise.all(n),r=c.zero;for(let s=q.length-1;s>=0;s--){if(!c.isZero(r))for(let t=0;t<l;t++)r=c.double(r);r=c.add(r,q[s][0])}return r}async function f(a,f,g,h,i){let j;if("G1"==b)j="affine"==g?2*c.F.n8:3*c.F.n8;else if("G2"==b)j="affine"==g?2*c.F.n8:3*c.F.n8;else throw Error("Invalid group");let k=Math.floor(a.byteLength/j),l=Math.floor(f.byteLength/k);if(l*k!=f.byteLength)throw Error("Scalar size does not match");let m=bA[a9(k)],n;(n=Math.floor(k/(d.concurrency/(Math.floor((8*l-1)/m)+1))))>4194304&&(n=4194304),n<1024&&(n=1024);let o=[];for(let p=0;p<k;p+=n){h&&h.debug(`Multiexp start: ${i}: ${p}/${k}`);let q=Math.min(k-p,n),r=a.slice(p*j,(p+q)*j),s=f.slice(p*l,(p+q)*l);o.push(e(r,s,g,h,i).then(a=>(h&&h.debug(`Multiexp end: ${i}: ${p}/${k}`),a)))}let t=await Promise.all(o),u=c.zero;for(let v=t.length-1;v>=0;v--)u=c.add(u,t[v]);return u}c.multiExp=async function(a,b,c,d){return await f(a,b,"jacobian",c,d)},c.multiExpAffine=async function(a,b,c,d){return await f(a,b,"affine",c,d)}}function bC(a,b){let c=a[b],d=a.Fr,e=c.tm;async function f(a,f,i,j,k,l){i=i||"affine",j=j||"affine";let m=14,n,o,p,q,r,s,t,u;"G1"==b?("affine"==i?(n=2*c.F.n8,q="g1m_batchToJacobian"):n=3*c.F.n8,o=3*c.F.n8,f&&(u="g1m_fftFinal"),t="g1m_fftJoin",s="g1m_fftMix","affine"==j?(p=2*c.F.n8,r="g1m_batchToAffine"):p=3*c.F.n8):"G2"==b?("affine"==i?(n=2*c.F.n8,q="g2m_batchToJacobian"):n=3*c.F.n8,o=3*c.F.n8,f&&(u="g2m_fftFinal"),t="g2m_fftJoin",s="g2m_fftMix","affine"==j?(p=2*c.F.n8,r="g2m_batchToAffine"):p=3*c.F.n8):"Fr"==b&&(n=c.n8,o=c.n8,p=c.n8,f&&(u="frm_fftFinal"),s="frm_fftMix",t="frm_fftJoin");let v=!1;Array.isArray(a)?(a=bh(a,n),v=!0):a=a.slice(0,a.byteLength);let w=a.byteLength/n,x=a9(w);if(1<<x!=w)throw Error("fft must be multiple of 2");if(x==d.s+1){let y;return(y=f?await h(a,i,j,k,l):await g(a,i,j,k,l),v)?bi(y,p):y}let z;f&&(z=d.inv(d.e(w)));let A;ba(a,n);let B,C=Math.min(1<<m,w),D=w/C;for(;D<e.concurrency&&C>=16;)D*=2,C/=2;let E=a9(C),F=[];for(let G=0;G<D;G++){k&&k.debug(`${l}: fft ${x} mix start: ${G}/${D}`);let H=[];H.push({cmd:"ALLOC",var:0,len:o*C});let I=a.slice(C*G*n,C*(G+1)*n);H.push({cmd:"SET",var:0,buff:I}),q&&H.push({cmd:"CALL",fnName:q,params:[{var:0},{val:C},{var:0}]});for(let J=1;J<=E;J++)H.push({cmd:"CALL",fnName:s,params:[{var:0},{val:C},{val:J}]});E==x?(u&&(H.push({cmd:"ALLOCSET",var:1,buff:z}),H.push({cmd:"CALL",fnName:u,params:[{var:0},{val:C},{var:1},]})),r&&H.push({cmd:"CALL",fnName:r,params:[{var:0},{val:C},{var:0}]}),H.push({cmd:"GET",out:0,var:0,len:C*p})):H.push({cmd:"GET",out:0,var:0,len:o*C}),F.push(e.queueAction(H).then(a=>(k&&k.debug(`${l}: fft ${x} mix end: ${G}/${D}`),a)))}B=await Promise.all(F);for(let K=0;K<D;K++)B[K]=B[K][0];for(let L=E+1;L<=x;L++){k&&k.debug(`${l}: fft  ${x}  join: ${L}/${x}`);let M=1<<x-L,N=D/M,O=[];for(let P=0;P<M;P++)for(let Q=0;Q<N/2;Q++){let R=d.exp(d.w[L],Q*C),S=d.w[L],T=P*N+Q,U=P*N+Q+N/2,V=[];V.push({cmd:"ALLOCSET",var:0,buff:B[T]}),V.push({cmd:"ALLOCSET",var:1,buff:B[U]}),V.push({cmd:"ALLOCSET",var:2,buff:R}),V.push({cmd:"ALLOCSET",var:3,buff:S}),V.push({cmd:"CALL",fnName:t,params:[{var:0},{var:1},{val:C},{var:2},{var:3}]}),L==x?(u&&(V.push({cmd:"ALLOCSET",var:4,buff:z}),V.push({cmd:"CALL",fnName:u,params:[{var:0},{val:C},{var:4},]}),V.push({cmd:"CALL",fnName:u,params:[{var:1},{val:C},{var:4},]})),r&&(V.push({cmd:"CALL",fnName:r,params:[{var:0},{val:C},{var:0}]}),V.push({cmd:"CALL",fnName:r,params:[{var:1},{val:C},{var:1}]})),V.push({cmd:"GET",out:0,var:0,len:C*p}),V.push({cmd:"GET",out:1,var:1,len:C*p})):(V.push({cmd:"GET",out:0,var:0,len:C*o}),V.push({cmd:"GET",out:1,var:1,len:C*o})),O.push(e.queueAction(V).then(a=>(k&&k.debug(`${l}: fft ${x} join  ${L}/${x}  ${P+1}/${M} ${Q}/${N/2}`),a)))}let W=await Promise.all(O);for(let X=0;X<M;X++)for(let Y=0;Y<N/2;Y++){let Z=X*N+Y,$=X*N+Y+N/2,_=W.shift();B[Z]=_[0],B[$]=_[1]}}if(A=a instanceof bn?new bn(w*p):new Uint8Array(w*p),f){A.set(B[0].slice((C-1)*p));let aa=p;for(let ab=D-1;ab>0;ab--)A.set(B[ab],aa),aa+=C*p,delete B[ab];A.set(B[0].slice(0,(C-1)*p),aa),delete B[0]}else for(let ac=0;ac<D;ac++)A.set(B[ac],C*p*ac),delete B[ac];return v?bi(A,p):A}async function g(a,b,c,e,g){let h,j;h=a.slice(0,a.byteLength/2),j=a.slice(a.byteLength/2,a.byteLength);let k=[];[h,j]=await i(h,j,"fftJoinExt",d.one,d.shift,b,"jacobian",e,g),k.push(f(h,!1,"jacobian",c,e,g)),k.push(f(j,!1,"jacobian",c,e,g));let l=await Promise.all(k),m;return(m=l[0].byteLength>268435456?new bn(2*l[0].byteLength):new Uint8Array(2*l[0].byteLength)).set(l[0]),m.set(l[1],l[0].byteLength),m}async function h(a,b,c,e,g){let h,j;h=a.slice(0,a.byteLength/2),j=a.slice(a.byteLength/2,a.byteLength);let k=[];k.push(f(h,!0,b,"jacobian",e,g)),k.push(f(j,!0,b,"jacobian",e,g)),[h,j]=await Promise.all(k);let l=await i(h,j,"fftJoinExtInv",d.one,d.shiftInv,"jacobian",c,e,g),m;return(m=l[0].byteLength>268435456?new bn(2*l[0].byteLength):new Uint8Array(2*l[0].byteLength)).set(l[0]),m.set(l[1],l[0].byteLength),m}async function i(a,f,g,h,i,j,k,l,m){let n,o,p,q,r,s;if("G1"==b)"affine"==j?(r=2*c.F.n8,o="g1m_batchToJacobian"):r=3*c.F.n8,s=3*c.F.n8,n="g1m_"+g,"affine"==k?(p="g1m_batchToAffine",q=2*c.F.n8):q=3*c.F.n8;else if("G2"==b)"affine"==j?(r=2*c.F.n8,o="g2m_batchToJacobian"):r=3*c.F.n8,n="g2m_"+g,s=3*c.F.n8,"affine"==k?(p="g2m_batchToAffine",q=2*c.F.n8):q=3*c.F.n8;else if("Fr"==b)r=d.n8,q=d.n8,s=d.n8,n="frm_"+g;else throw Error("Invalid group");if(a.byteLength!=f.byteLength)throw Error("Invalid buffer size");let t=Math.floor(a.byteLength/r);if(t!=1<<a9(t))throw Error("Invalid number of points");let u=Math.floor(t/e.concurrency);u<16&&(u=16),u>65536&&(u=65536);let v=[];for(let w=0;w<t;w+=u){l&&l.debug(`${m}: fftJoinExt Start: ${w}/${t}`);let x=Math.min(t-w,u),y=d.mul(h,d.exp(i,w)),z=[],A=a.slice(w*r,(w+x)*r),B=f.slice(w*r,(w+x)*r);z.push({cmd:"ALLOC",var:0,len:s*x}),z.push({cmd:"SET",var:0,buff:A}),z.push({cmd:"ALLOC",var:1,len:s*x}),z.push({cmd:"SET",var:1,buff:B}),z.push({cmd:"ALLOCSET",var:2,buff:y}),z.push({cmd:"ALLOCSET",var:3,buff:i}),o&&(z.push({cmd:"CALL",fnName:o,params:[{var:0},{val:x},{var:0}]}),z.push({cmd:"CALL",fnName:o,params:[{var:1},{val:x},{var:1}]})),z.push({cmd:"CALL",fnName:n,params:[{var:0},{var:1},{val:x},{var:2},{var:3},{val:d.s},]}),p&&(z.push({cmd:"CALL",fnName:p,params:[{var:0},{val:x},{var:0}]}),z.push({cmd:"CALL",fnName:p,params:[{var:1},{val:x},{var:1}]})),z.push({cmd:"GET",out:0,var:0,len:x*q}),z.push({cmd:"GET",out:1,var:1,len:x*q}),v.push(e.queueAction(z).then(a=>(l&&l.debug(`${m}: fftJoinExt End: ${w}/${t}`),a)))}let C=await Promise.all(v),D,E;t*q>268435456?(D=new bn(t*q),E=new bn(t*q)):(D=new Uint8Array(t*q),E=new Uint8Array(t*q));let F=0;for(let G=0;G<C.length;G++)D.set(C[G][0],F),E.set(C[G][1],F),F+=C[G][0].byteLength;return[D,E]}c.fft=async function(a,b,c,d,e){return await f(a,!1,b,c,d,e)},c.ifft=async function(a,b,c,d,e){return await f(a,!0,b,c,d,e)},c.lagrangeEvaluations=async function(a,e,g,h,j){e=e||"affine",g=g||"affine";let k;if("G1"==b)k="affine"==e?2*c.F.n8:3*c.F.n8;else if("G2"==b)k="affine"==e?2*c.F.n8:3*c.F.n8;else if("Fr"==b)k=d.n8;else throw Error("Invalid group");let l=a.byteLength/k,m=a9(l);if(2**m*k!=a.byteLength)throw h&&h.error("lagrangeEvaluations iinvalid input size"),Error("lagrangeEvaluations invalid Input size");if(m<=d.s)return await c.ifft(a,e,g,h,j);if(m>d.s+1)throw h&&h.error("lagrangeEvaluations input too big"),Error("lagrangeEvaluations input too big");let n=a.slice(0,a.byteLength/2),o=a.slice(a.byteLength/2,a.byteLength),p=d.exp(d.shift,l/2),q=d.inv(d.sub(d.one,p));[n,o]=await i(n,o,"prepareLagrangeEvaluation",q,d.shiftInv,e,"jacobian",h,j+" prep");let r=[];r.push(f(n,!0,"jacobian",g,h,j+" t0")),r.push(f(o,!0,"jacobian",g,h,j+" t1")),[n,o]=await Promise.all(r);let s;return(s=n.byteLength>268435456?new bn(2*n.byteLength):new Uint8Array(2*n.byteLength)).set(n),s.set(o,n.byteLength),s},c.fftMix=async function(a){let f=3*c.F.n8,g,h;if("G1"==b)g="g1m_fftMix",h="g1m_fftJoin";else if("G2"==b)g="g2m_fftMix",h="g2m_fftJoin";else if("Fr"==b)g="frm_fftMix",h="frm_fftJoin";else throw Error("Invalid group");let i=Math.floor(a.byteLength/f),j=a9(i),k=1<<a9(e.concurrency);i<=2*k&&(k=1);let l=i/k,m=a9(l),n=[];for(let o=0;o<k;o++){let p=[],q=a.slice(o*l*f,(o+1)*l*f);p.push({cmd:"ALLOCSET",var:0,buff:q});for(let r=1;r<=m;r++)p.push({cmd:"CALL",fnName:g,params:[{var:0},{val:l},{val:r}]});p.push({cmd:"GET",out:0,var:0,len:l*f}),n.push(e.queueAction(p))}let s=await Promise.all(n),t=[];for(let u=0;u<s.length;u++)t[u]=s[u][0];for(let v=m+1;v<=j;v++){let w=1<<j-v,x=k/w,y=[];for(let z=0;z<w;z++)for(let A=0;A<x/2;A++){let B=d.exp(d.w[v],A*l),C=d.w[v],D=z*x+A,E=z*x+A+x/2,F=[];F.push({cmd:"ALLOCSET",var:0,buff:t[D]}),F.push({cmd:"ALLOCSET",var:1,buff:t[E]}),F.push({cmd:"ALLOCSET",var:2,buff:B}),F.push({cmd:"ALLOCSET",var:3,buff:C}),F.push({cmd:"CALL",fnName:h,params:[{var:0},{var:1},{val:l},{var:2},{var:3}]}),F.push({cmd:"GET",out:0,var:0,len:l*f}),F.push({cmd:"GET",out:1,var:1,len:l*f}),y.push(e.queueAction(F))}let G=await Promise.all(y);for(let H=0;H<w;H++)for(let I=0;I<x/2;I++){let J=H*x+I,K=H*x+I+x/2,L=G.shift();t[J]=L[0],t[K]=L[1]}}let M;M=a instanceof bn?new bn(i*f):new Uint8Array(i*f);let N=0;for(let O=0;O<k;O++)M.set(t[O],N),N+=t[O].byteLength;return M},c.fftJoin=async function(a,f,g,h){let i=3*c.F.n8,j;if("G1"==b)j="g1m_fftJoin";else if("G2"==b)j="g2m_fftJoin";else if("Fr"==b)j="frm_fftJoin";else throw Error("Invalid group");if(a.byteLength!=f.byteLength)throw Error("Invalid buffer size");let k=Math.floor(a.byteLength/i);if(k!=1<<a9(k))throw Error("Invalid number of points");let l=1<<a9(e.concurrency);k<=2*l&&(l=1);let m=k/l,n=[];for(let o=0;o<l;o++){let p=[],q=d.mul(g,d.exp(h,o*m)),r=a.slice(o*m*i,(o+1)*m*i),s=f.slice(o*m*i,(o+1)*m*i);p.push({cmd:"ALLOCSET",var:0,buff:r}),p.push({cmd:"ALLOCSET",var:1,buff:s}),p.push({cmd:"ALLOCSET",var:2,buff:q}),p.push({cmd:"ALLOCSET",var:3,buff:h}),p.push({cmd:"CALL",fnName:j,params:[{var:0},{var:1},{val:m},{var:2},{var:3}]}),p.push({cmd:"GET",out:0,var:0,len:m*i}),p.push({cmd:"GET",out:1,var:1,len:m*i}),n.push(e.queueAction(p))}let t=await Promise.all(n),u,v;a instanceof bn?(u=new bn(k*i),v=new bn(k*i)):(u=new Uint8Array(k*i),v=new Uint8Array(k*i));let w=0;for(let x=0;x<t.length;x++)u.set(t[x][0],w),v.set(t[x][1],w),w+=t[x][0].byteLength;return[u,v]},c.fftFinal=async function(a,d){let f=3*c.F.n8,g=2*c.F.n8,h,i;if("G1"==b)h="g1m_fftFinal",i="g1m_batchToAffine";else if("G2"==b)h="g2m_fftFinal",i="g2m_batchToAffine";else throw Error("Invalid group");let j=Math.floor(a.byteLength/f);if(j!=1<<a9(j))throw Error("Invalid number of points");let k=Math.floor(j/e.concurrency),l=[];for(let m=0;m<e.concurrency;m++){let n;if(0==(n=m<e.concurrency-1?k:j-m*k))continue;let o=[],p=a.slice(m*k*f,(m*k+n)*f);o.push({cmd:"ALLOCSET",var:0,buff:p}),o.push({cmd:"ALLOCSET",var:1,buff:d}),o.push({cmd:"CALL",fnName:h,params:[{var:0},{val:n},{var:1},]}),o.push({cmd:"CALL",fnName:i,params:[{var:0},{val:n},{var:0},]}),o.push({cmd:"GET",out:0,var:0,len:n*g}),l.push(e.queueAction(o))}let q=await Promise.all(l),r;r=a instanceof bn?new bn(j*g):new Uint8Array(j*g);let s=0;for(let t=q.length-1;t>=0;t--)r.set(q[t][0],s),s+=q[t][0].byteLength;return r}}async function bD(a){let b=await bx(a.wasm,a.singleThread),c={};return c.q=I(a.wasm.q.toString()),c.r=I(a.wasm.r.toString()),c.name=a.name,c.tm=b,c.prePSize=a.wasm.prePSize,c.preQSize=a.wasm.preQSize,c.Fr=new bp(b,"frm",a.n8r,a.r),c.F1=new bp(b,"f1m",a.n8q,a.q),c.F2=new bq(b,"f2m",c.F1),c.G1=new bs(b,"g1m",c.F1,a.wasm.pG1gen,a.wasm.pG1b,a.cofactorG1),c.G2=new bs(b,"g2m",c.F2,a.wasm.pG2gen,a.wasm.pG2b,a.cofactorG2),c.F6=new br(b,"f6m",c.F2),c.F12=new bq(b,"ftm",c.F6),c.Gt=c.F12,bz(c,"G1"),bz(c,"G2"),bz(c,"Fr"),bB(c,"G1"),bB(c,"G2"),bC(c,"G1"),bC(c,"G2"),bC(c,"Fr"),!function(a){let b=a.tm;a.pairing=function(c,d){b.startSyncOp();let e=b.allocBuff(a.G1.toJacobian(c)),f=b.allocBuff(a.G2.toJacobian(d)),g=b.alloc(a.Gt.n8);b.instance.exports[a.name+"_pairing"](e,f,g);let h=b.getBuff(g,a.Gt.n8);return b.endSyncOp(),h},a.pairingEq=async function(){let c,d;arguments.length%2==1?(c=arguments[arguments.length-1],d=(arguments.length-1)/2):(c=a.Gt.one,d=arguments.length/2);let e=[];for(let f=0;f<d;f++){let g=[],h=a.G1.toJacobian(arguments[2*f]);g.push({cmd:"ALLOCSET",var:0,buff:h}),g.push({cmd:"ALLOC",var:1,len:a.prePSize});let i=a.G2.toJacobian(arguments[2*f+1]);g.push({cmd:"ALLOCSET",var:2,buff:i}),g.push({cmd:"ALLOC",var:3,len:a.preQSize}),g.push({cmd:"ALLOC",var:4,len:a.Gt.n8}),g.push({cmd:"CALL",fnName:a.name+"_prepareG1",params:[{var:0},{var:1}]}),g.push({cmd:"CALL",fnName:a.name+"_prepareG2",params:[{var:2},{var:3}]}),g.push({cmd:"CALL",fnName:a.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),g.push({cmd:"GET",out:0,var:4,len:a.Gt.n8}),e.push(b.queueAction(g))}let j=await Promise.all(e);b.startSyncOp();let k=b.alloc(a.Gt.n8);b.instance.exports.ftm_one(k);for(let l=0;l<j.length;l++){let m=b.allocBuff(j[l][0]);b.instance.exports.ftm_mul(k,m,k)}b.instance.exports[a.name+"_finalExponentiation"](k,k);let n=b.allocBuff(c),o=!!b.instance.exports.ftm_eq(k,n);return b.endSyncOp(),o},a.prepareG1=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](b,c);let d=this.tm.getBuff(c,this.prePSize);return this.tm.endSyncOp(),d},a.prepareG2=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](b,c);let d=this.tm.getBuff(c,this.preQSize);return this.tm.endSyncOp(),d},a.millerLoop=function(a,b){this.tm.startSyncOp();let c=this.tm.allocBuff(a),d=this.tm.allocBuff(b),e=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](c,d,e);let f=this.tm.getBuff(e,this.Gt.n8);return this.tm.endSyncOp(),f},a.finalExponentiation=function(a){this.tm.startSyncOp();let b=this.tm.allocBuff(a),c=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](b,c);let d=this.tm.getBuff(c,this.Gt.n8);return this.tm.endSyncOp(),d}}(c),c.array2buffer=function(a,b){let c=new Uint8Array(b*a.length);for(let d=0;d<a.length;d++)c.set(a[d],d*b);return c},c.buffer2array=function(a,b){let c=a.byteLength/b,d=Array(c);for(let e=0;e<c;e++)d[e]=a.slice(e*b,e*b+b);return d},c}async function bE(a,b){let c=new i.ModuleBuilder;c.setMemory(25),f.buildBn128(c),b&&b(c);let d={};if(d.code=c.build(),d.pq=c.modules.f1m.pq,d.pr=c.modules.frm.pq,d.pG1gen=c.modules.bn128.pG1gen,d.pG1zero=c.modules.bn128.pG1zero,d.pG1b=c.modules.bn128.pG1b,d.pG2gen=c.modules.bn128.pG2gen,d.pG2zero=c.modules.bn128.pG2zero,d.pG2b=c.modules.bn128.pG2b,d.pOneT=c.modules.bn128.pOneT,d.prePSize=c.modules.bn128.prePSize,d.preQSize=c.modules.bn128.preQSize,d.n8q=32,d.n8r=32,d.q=c.modules.bn128.q,d.r=c.modules.bn128.r,!a&&globalThis.curve_bn128)return globalThis.curve_bn128;let e={name:"bn128",wasm:d,q:I("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:I("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:I("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!a},g=await bD(e);return g.terminate=async function(){e.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},a||(globalThis.curve_bn128=g),g}async function bF(a,b){let c=new i.ModuleBuilder;c.setMemory(25),f.buildBls12381(c),b&&b(c);let d={};if(d.code=c.build(),d.pq=c.modules.f1m.pq,d.pr=c.modules.frm.pq,d.pG1gen=c.modules.bls12381.pG1gen,d.pG1zero=c.modules.bls12381.pG1zero,d.pG1b=c.modules.bls12381.pG1b,d.pG2gen=c.modules.bls12381.pG2gen,d.pG2zero=c.modules.bls12381.pG2zero,d.pG2b=c.modules.bls12381.pG2b,d.pOneT=c.modules.bls12381.pOneT,d.prePSize=c.modules.bls12381.prePSize,d.preQSize=c.modules.bls12381.preQSize,d.n8q=48,d.n8r=32,d.q=c.modules.bls12381.q,d.r=c.modules.bls12381.r,!a&&globalThis.curve_bls12381)return globalThis.curve_bls12381;let e={name:"bls12381",wasm:d,q:I("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:I("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:I("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:I("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!a},g=await bD(e);return g.terminate=async function(){e.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},a||(globalThis.curve_bls12381=g),g}globalThis.curve_bn128=null,globalThis.curve_bls12381=null;let bG=I("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),bH=I("21888242871839275222246405745257275088548364400416034343698204186575808495617"),bI=I("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),bJ=I("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function bK(a,b,c){let d;if(ae(a,bH))d=await bE(b,c);else if(ae(a,bG))d=await bF(b,c);else throw Error(`Curve not supported: ${D(a)}`);return d}async function bL(a,b,c){let d;if(ae(a,bJ))d=await bE(b,c);else if(ae(a,bI))d=await bF(b,c);else throw Error(`Curve not supported: ${D(a,16)}`);return d}async function bM(a,b,c){var d;let e,f=(d=a,d.toUpperCase().match(/[A-Za-z0-9]+/g).join(""));if(["BN128","BN254","ALTBN128"].indexOf(f)>=0)e=await bE(b,c);else if(["BLS12381"].indexOf(f)>=0)e=await bF(b,c);else throw Error(`Curve not supported: ${a}`);return e}b.BigBuffer=bn,b.ChaCha=aL,b.EC=class{constructor(a,b){this.F=a,this.g=b,2==this.g.length&&(this.g[2]=this.F.one),this.zero=[this.F.zero,this.F.one,this.F.zero]}add(a,b){let c=this.F;if(this.eq(a,this.zero))return b;if(this.eq(b,this.zero))return a;let d=[,,,],e=c.square(a[2]),f=c.square(b[2]),g=c.mul(a[0],f),h=c.mul(b[0],e),i=c.mul(a[2],e),j=c.mul(b[2],f),k=c.mul(a[1],j),l=c.mul(b[1],i);if(c.eq(g,h)&&c.eq(k,l))return this.double(a);let m=c.sub(h,g),n=c.sub(l,k),o=c.square(c.add(m,m)),p=c.mul(m,o),q=c.add(n,n),r=c.mul(g,o);d[0]=c.sub(c.sub(c.square(q),p),c.add(r,r));let s=c.mul(k,p);return d[1]=c.sub(c.mul(q,c.sub(r,d[0])),c.add(s,s)),d[2]=c.mul(m,c.sub(c.square(c.add(a[2],b[2])),c.add(e,f))),d}neg(a){return[a[0],this.F.neg(a[1]),a[2]]}sub(a,b){return this.add(a,this.neg(b))}double(a){let b=this.F,c=[,,,];if(this.eq(a,this.zero))return a;let d=b.square(a[0]),e=b.square(a[1]),f=b.square(e),g=b.sub(b.square(b.add(a[0],e)),b.add(d,f));g=b.add(g,g);let h=b.add(b.add(d,d),d),i=b.square(h);c[0]=b.sub(i,b.add(g,g));let j=b.add(f,f);j=b.add(j,j),j=b.add(j,j),c[1]=b.sub(b.mul(h,b.sub(g,c[0])),j);let k=b.mul(a[1],a[2]);return c[2]=b.add(k,k),c}timesScalar(a,b){return az(this,a,b)}mulScalar(a,b){return az(this,a,b)}affine(a){let b=this.F;if(this.isZero(a))return this.zero;if(b.eq(a[2],b.one))return a;{let c=b.inv(a[2]),d=b.square(c),e=b.mul(d,c),f=[,,,];return f[0]=b.mul(a[0],d),f[1]=b.mul(a[1],e),f[2]=b.one,f}}multiAffine(a){let b=Object.keys(a),c=this.F,d=Array(b.length+1);d[0]=c.one;for(let e=0;e<b.length;e++)c.eq(a[b[e]][2],c.zero)?d[e+1]=d[e]:d[e+1]=c.mul(d[e],a[b[e]][2]);d[b.length]=c.inv(d[b.length]);for(let f=b.length-1;f>=0;f--)if(c.eq(a[b[f]][2],c.zero))d[f]=d[f+1],a[b[f]]=this.zero;else{let g=c.mul(d[f],d[f+1]);d[f]=c.mul(a[b[f]][2],d[f+1]);let h=c.square(g),i=c.mul(h,g);a[b[f]][0]=c.mul(a[b[f]][0],h),a[b[f]][1]=c.mul(a[b[f]][1],i),a[b[f]][2]=c.one}}eq(a,b){let c=this.F;if(this.F.eq(a[2],this.F.zero))return this.F.eq(b[2],this.F.zero);if(this.F.eq(b[2],this.F.zero))return!1;let d=c.square(a[2]),e=c.square(b[2]),f=c.mul(a[0],e),g=c.mul(b[0],d),h=c.mul(a[2],d),i=c.mul(b[2],e),j=c.mul(a[1],i),k=c.mul(b[1],h);return c.eq(f,g)&&c.eq(j,k)}isZero(a){return this.F.isZero(a[2])}toString(a){let b=this.affine(a);return`[ ${this.F.toString(b[0])} , ${this.F.toString(b[1])} ]`}fromRng(a){let b=this.F,c=[],d;do{c[0]=b.fromRng(a),d=a.nextBool();let e=b.add(b.mul(b.square(c[0]),c[0]),this.b);c[1]=b.sqrt(e)}while(null==c[1]||b.isZero[c]);let f=aW(b,c[1]);return d^f&&(c[1]=b.neg(c[1])),c[2]=b.one,this.cofactor&&(c=this.mulScalar(c,this.cofactor)),c=this.affine(c)}toRprLE(a,b,c){if(c=this.affine(c),this.isZero(c)){let d=new Uint8Array(a,b,2*this.F.n8);d.fill(0);return}this.F.toRprLE(a,b,c[0]),this.F.toRprLE(a,b+this.F.n8,c[1])}toRprBE(a,b,c){if(c=this.affine(c),this.isZero(c)){let d=new Uint8Array(a,b,2*this.F.n8);d.fill(0);return}this.F.toRprBE(a,b,c[0]),this.F.toRprBE(a,b+this.F.n8,c[1])}toRprLEM(a,b,c){if(c=this.affine(c),this.isZero(c)){let d=new Uint8Array(a,b,2*this.F.n8);d.fill(0);return}this.F.toRprLEM(a,b,c[0]),this.F.toRprLEM(a,b+this.F.n8,c[1])}toRprLEJM(a,b,c){if(c=this.affine(c),this.isZero(c)){let d=new Uint8Array(a,b,2*this.F.n8);d.fill(0);return}this.F.toRprLEM(a,b,c[0]),this.F.toRprLEM(a,b+this.F.n8,c[1]),this.F.toRprLEM(a,b+2*this.F.n8,c[2])}toRprBEM(a,b,c){if(c=this.affine(c),this.isZero(c)){let d=new Uint8Array(a,b,2*this.F.n8);d.fill(0);return}this.F.toRprBEM(a,b,c[0]),this.F.toRprBEM(a,b+this.F.n8,c[1])}fromRprLE(a,b){b=b||0;let c=this.F.fromRprLE(a,b),d=this.F.fromRprLE(a,b+this.F.n8);return this.F.isZero(c)&&this.F.isZero(d)?this.zero:[c,d,this.F.one]}fromRprBE(a,b){b=b||0;let c=this.F.fromRprBE(a,b),d=this.F.fromRprBE(a,b+this.F.n8);return this.F.isZero(c)&&this.F.isZero(d)?this.zero:[c,d,this.F.one]}fromRprLEM(a,b){b=b||0;let c=this.F.fromRprLEM(a,b),d=this.F.fromRprLEM(a,b+this.F.n8);return this.F.isZero(c)&&this.F.isZero(d)?this.zero:[c,d,this.F.one]}fromRprLEJM(a,b){b=b||0;let c=this.F.fromRprLEM(a,b),d=this.F.fromRprLEM(a,b+this.F.n8),e=this.F.fromRprLEM(a,b+2*this.F.n8);return this.F.isZero(c)&&this.F.isZero(d)?this.zero:[c,d,e]}fromRprBEM(a,b){b=b||0;let c=this.F.fromRprBEM(a,b),d=this.F.fromRprBEM(a,b+this.F.n8);return this.F.isZero(c)&&this.F.isZero(d)?this.zero:[c,d,this.F.one]}fromRprCompressed(a,b){let c=this.F,d=new Uint8Array(a.buffer,b,c.n8);if(64&d[0])return this.zero;let e=[,,,],f=(128&d[0])!=0;d[0]=127&d[0],e[0]=c.fromRprBE(a,b),f&&(d[0]=128|d[0]);let g=c.add(c.mul(c.square(e[0]),e[0]),this.b);if(e[1]=c.sqrt(g),null===e[1])throw Error("Invalid Point!");let h=aW(c,e[1]);return f^h&&(e[1]=c.neg(e[1])),e[2]=c.one,e}toRprCompressed(a,b,c){c=this.affine(c);let d=new Uint8Array(a.buffer,b,this.F.n8);if(this.isZero(c)){d.fill(0),d[0]=64;return}this.F.toRprBE(a,b,c[0]),aW(this.F,c[1])&&(d[0]=128|d[0])}fromRprUncompressed(a,b){return 64&a[0]?this.zero:this.fromRprBE(a,b)}toRprUncompressed(a,b,c){this.toRprBE(a,b,c),this.isZero(c)&&(a[b]=64|a[b])}},b.F1Field=aV,b.F2Field=class{constructor(a,b){this.type="F2",this.F=a,this.zero=[this.F.zero,this.F.zero],this.one=[this.F.one,this.F.zero],this.negone=this.neg(this.one),this.nonResidue=b,this.m=2*a.m,this.p=a.p,this.n64=2*a.n64,this.n32=2*this.n64,this.n8=8*this.n64,aB(this)}_mulByNonResidue(a){return this.F.mul(this.nonResidue,a)}copy(a){return[this.F.copy(a[0]),this.F.copy(a[1])]}add(a,b){return[this.F.add(a[0],b[0]),this.F.add(a[1],b[1])]}double(a){return this.add(a,a)}sub(a,b){return[this.F.sub(a[0],b[0]),this.F.sub(a[1],b[1])]}neg(a){return this.sub(this.zero,a)}conjugate(a){return[a[0],this.F.neg(a[1])]}mul(a,b){let c=this.F.mul(a[0],b[0]),d=this.F.mul(a[1],b[1]);return[this.F.add(c,this._mulByNonResidue(d)),this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(b[0],b[1])),this.F.add(c,d))]}inv(a){let b=this.F.square(a[0]),c=this.F.square(a[1]),d=this.F.sub(b,this._mulByNonResidue(c)),e=this.F.inv(d);return[this.F.mul(a[0],e),this.F.neg(this.F.mul(a[1],e))]}div(a,b){return this.mul(a,this.inv(b))}square(a){let b=this.F.mul(a[0],a[1]);return[this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(a[0],this._mulByNonResidue(a[1]))),this.F.add(b,this._mulByNonResidue(b))),this.F.add(b,b)]}isZero(a){return this.F.isZero(a[0])&&this.F.isZero(a[1])}eq(a,b){return this.F.eq(a[0],b[0])&&this.F.eq(a[1],b[1])}mulScalar(a,b){return az(this,a,b)}pow(a,b){return aA(this,a,b)}exp(a,b){return aA(this,a,b)}toString(a){return`[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])} ]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a);return[b,c]}gt(a,b){return!!this.F.gt(a[0],b[0])|| !this.F.gt(b[0],a[0])&&!!this.F.gt(a[1],b[1])}geq(a,b){return this.gt(a,b)||this.eq(a,b)}lt(a,b){return!this.geq(a,b)}leq(a,b){return!this.gt(a,b)}neq(a,b){return!this.eq(a,b)}random(){return[this.F.random(),this.F.random()]}toRprLE(a,b,c){this.F.toRprLE(a,b,c[0]),this.F.toRprLE(a,b+this.F.n8,c[1])}toRprBE(a,b,c){this.F.toRprBE(a,b,c[1]),this.F.toRprBE(a,b+this.F.n8,c[0])}toRprLEM(a,b,c){this.F.toRprLEM(a,b,c[0]),this.F.toRprLEM(a,b+this.F.n8,c[1])}toRprBEM(a,b,c){this.F.toRprBEM(a,b,c[1]),this.F.toRprBEM(a,b+this.F.n8,c[0])}fromRprLE(a,b){b=b||0;let c=this.F.fromRprLE(a,b),d=this.F.fromRprLE(a,b+this.F.n8);return[c,d]}fromRprBE(a,b){b=b||0;let c=this.F.fromRprBE(a,b),d=this.F.fromRprBE(a,b+this.F.n8);return[d,c]}fromRprLEM(a,b){b=b||0;let c=this.F.fromRprLEM(a,b),d=this.F.fromRprLEM(a,b+this.F.n8);return[c,d]}fromRprBEM(a,b){b=b||0;let c=this.F.fromRprBEM(a,b),d=this.F.fromRprBEM(a,b+this.F.n8);return[d,c]}toObject(a){return a}},b.F3Field=class{constructor(a,b){this.type="F3",this.F=a,this.zero=[this.F.zero,this.F.zero,this.F.zero],this.one=[this.F.one,this.F.zero,this.F.zero],this.negone=this.neg(this.one),this.nonResidue=b,this.m=3*a.m,this.p=a.p,this.n64=3*a.n64,this.n32=2*this.n64,this.n8=8*this.n64}_mulByNonResidue(a){return this.F.mul(this.nonResidue,a)}copy(a){return[this.F.copy(a[0]),this.F.copy(a[1]),this.F.copy(a[2])]}add(a,b){return[this.F.add(a[0],b[0]),this.F.add(a[1],b[1]),this.F.add(a[2],b[2])]}double(a){return this.add(a,a)}sub(a,b){return[this.F.sub(a[0],b[0]),this.F.sub(a[1],b[1]),this.F.sub(a[2],b[2])]}neg(a){return this.sub(this.zero,a)}mul(a,b){let c=this.F.mul(a[0],b[0]),d=this.F.mul(a[1],b[1]),e=this.F.mul(a[2],b[2]);return[this.F.add(c,this._mulByNonResidue(this.F.sub(this.F.mul(this.F.add(a[1],a[2]),this.F.add(b[1],b[2])),this.F.add(d,e)))),this.F.add(this.F.sub(this.F.mul(this.F.add(a[0],a[1]),this.F.add(b[0],b[1])),this.F.add(c,d)),this._mulByNonResidue(e)),this.F.add(this.F.sub(this.F.mul(this.F.add(a[0],a[2]),this.F.add(b[0],b[2])),this.F.add(c,e)),d)]}inv(a){let b=this.F.square(a[0]),c=this.F.square(a[1]),d=this.F.square(a[2]),e=this.F.mul(a[0],a[1]),f=this.F.mul(a[0],a[2]),g=this.F.mul(a[1],a[2]),h=this.F.sub(b,this._mulByNonResidue(g)),i=this.F.sub(this._mulByNonResidue(d),e),j=this.F.sub(c,f),k=this.F.inv(this.F.add(this.F.mul(a[0],h),this._mulByNonResidue(this.F.add(this.F.mul(a[2],i),this.F.mul(a[1],j)))));return[this.F.mul(k,h),this.F.mul(k,i),this.F.mul(k,j)]}div(a,b){return this.mul(a,this.inv(b))}square(a){let b=this.F.square(a[0]),c=this.F.mul(a[0],a[1]),d=this.F.add(c,c),e=this.F.square(this.F.add(this.F.sub(a[0],a[1]),a[2])),f=this.F.mul(a[1],a[2]),g=this.F.add(f,f),h=this.F.square(a[2]);return[this.F.add(b,this._mulByNonResidue(g)),this.F.add(d,this._mulByNonResidue(h)),this.F.sub(this.F.add(this.F.add(d,e),g),this.F.add(b,h))]}isZero(a){return this.F.isZero(a[0])&&this.F.isZero(a[1])&&this.F.isZero(a[2])}eq(a,b){return this.F.eq(a[0],b[0])&&this.F.eq(a[1],b[1])&&this.F.eq(a[2],b[2])}affine(a){return[this.F.affine(a[0]),this.F.affine(a[1]),this.F.affine(a[2])]}mulScalar(a,b){return az(this,a,b)}pow(a,b){return aA(this,a,b)}exp(a,b){return aA(this,a,b)}toString(a){return`[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])}, ${this.F.toString(a[2])} ]`}fromRng(a){let b=this.F.fromRng(a),c=this.F.fromRng(a),d=this.F.fromRng(a);return[b,c,d]}gt(a,b){return!!this.F.gt(a[0],b[0])|| !this.F.gt(b[0],a[0])&&(!!this.F.gt(a[1],b[1])|| !this.F.gt(b[1],a[1])&&!!this.F.gt(a[2],b[2]))}geq(a,b){return this.gt(a,b)||this.eq(a,b)}lt(a,b){return!this.geq(a,b)}leq(a,b){return!this.gt(a,b)}neq(a,b){return!this.eq(a,b)}random(){return[this.F.random(),this.F.random(),this.F.random()]}toRprLE(a,b,c){this.F.toRprLE(a,b,c[0]),this.F.toRprLE(a,b+this.F.n8,c[1]),this.F.toRprLE(a,b+2*this.F.n8,c[2])}toRprBE(a,b,c){this.F.toRprBE(a,b,c[2]),this.F.toRprBE(a,b+this.F.n8,c[1]),this.F.toRprBE(a,b+2*this.F.n8,c[0])}toRprLEM(a,b,c){this.F.toRprLEM(a,b,c[0]),this.F.toRprLEM(a,b+this.F.n8,c[1]),this.F.toRprLEM(a,b+2*this.F.n8,c[2])}toRprBEM(a,b,c){this.F.toRprBEM(a,b,c[2]),this.F.toRprBEM(a,b+this.F.n8,c[1]),this.F.toRprBEM(a,b+2*this.F.n8,c[0])}fromRprLE(a,b){b=b||0;let c=this.F.fromRprLE(a,b),d=this.F.fromRprLE(a,b+this.n8),e=this.F.fromRprLE(a,b+2*this.n8);return[c,d,e]}fromRprBE(a,b){b=b||0;let c=this.F.fromRprBE(a,b),d=this.F.fromRprBE(a,b+this.n8),e=this.F.fromRprBE(a,b+2*this.n8);return[e,d,c]}fromRprLEM(a,b){b=b||0;let c=this.F.fromRprLEM(a,b),d=this.F.fromRprLEM(a,b+this.n8),e=this.F.fromRprLEM(a,b+2*this.n8);return[c,d,e]}fromRprBEM(a,b){b=b||0;let c=this.F.fromRprBEM(a,b),d=this.F.fromRprBEM(a,b+this.n8),e=this.F.fromRprBEM(a,b+2*this.n8);return[e,d,c]}toObject(a){return a}},b.PolField=class a{constructor(a){this.F=a;let b=a.sqrt_t,c=a.sqrt_s,d=this.F.add(this.F.add(this.F.two,this.F.two),this.F.one);this.w=Array(c+1),this.wi=Array(c+1),this.w[c]=this.F.pow(d,b),this.wi[c]=this.F.inv(this.w[c]);let e=c-1;for(;e>=0;)this.w[e]=this.F.square(this.w[e+1]),this.wi[e]=this.F.square(this.wi[e+1]),e--;this.roots=[],this._setRoots(15)}_setRoots(a){a>this.F.sqrt_s&&(a=this.s);for(let b=a;b>=0&&!this.roots[b];b--){let c=this.F.one,d=1<<b,e=Array(d);for(let f=0;f<d;f++)e[f]=c,c=this.F.mul(c,this.w[b]);this.roots[b]=e}}add(a,b){let c=Math.max(a.length,b.length),d=Array(c);for(let e=0;e<c;e++)d[e]=this.F.add(a[e]||this.F.zero,b[e]||this.F.zero);return this.reduce(d)}double(a){return this.add(a,a)}sub(a,b){let c=Math.max(a.length,b.length),d=Array(c);for(let e=0;e<c;e++)d[e]=this.F.sub(a[e]||this.F.zero,b[e]||this.F.zero);return this.reduce(d)}mulScalar(a,b){if(this.F.eq(b,this.F.zero))return[];if(this.F.eq(b,this.F.one))return a;let c=Array(a.length);for(let d=0;d<a.length;d++)c[d]=this.F.mul(a[d],b);return c}mul(a,b){return 0==a.length||0==b.length?[]:1==a.length?this.mulScalar(b,a[0]):1==b.length?this.mulScalar(a,b[0]):(b.length>a.length&&([b,a]=[a,b]),b.length<=2||b.length<ar(a.length))?this.mulNormal(a,b):this.mulFFT(a,b)}mulNormal(a,b){let c=[];for(let d=0;d<b.length;d++)c=this.add(c,this.scaleX(this.mulScalar(a,b[d]),d));return c}mulFFT(a,b){let c=Math.max(a.length,b.length),d=ar(c-1)+2;this._setRoots(d);let e=1<<d,f=this.extend(a,e),g=this.extend(b,e),h=as(this,f,d,0,1),i=as(this,g,d,0,1),j=Array(e);for(let k=0;k<e;k++)j[k]=this.F.mul(h[k],i[k]);let l=as(this,j,d,0,1),m=this.F.inv(this.F.mulScalar(this.F.one,e)),n=Array(e);for(let o=0;o<e;o++)n[o]=this.F.mul(l[(e-o)%e],m);return this.reduce(n)}square(a){return this.mul(a,a)}scaleX(a,b){if(0==b)return a;if(b>0){let c=Array(b).fill(this.F.zero);return c.concat(a)}return-b>=a.length?[]:a.slice(-b)}eval2(a,b){let c=this.F.zero,d=this.F.one;for(let e=0;e<a.length;e++)c=this.F.add(c,this.F.mul(a[e],d)),d=this.F.mul(d,b);return c}eval(a,b){let c=this.F;if(0==a.length)return c.zero;let d=this._next2Power(a.length),e=this.extend(a,d);return f(e,b,0,1,d);function f(a,b,d,e,g){if(1==g)return a[d];let h=c.square(b),i=c.add(f(a,h,d,e<<1,g>>1),c.mul(b,f(a,h,d+e,e<<1,g>>1)));return i}}lagrange(a){let b=[this.F.one];for(let c=0;c<a.length;c++)b=this.mul(b,[this.F.neg(a[c][0]),this.F.one]);let d=[];for(let e=0;e<a.length;e++){let f=this.ruffini(b,a[e][0]),g=this.F.mul(this.F.inv(this.eval(f,a[e][0])),a[e][1]);f=this.mulScalar(f,g),d=this.add(d,f)}return d}fft(a){if(a.length<=1)return a;let b=ar(a.length-1)+1;this._setRoots(b);let c=1<<b,d=this.extend(a,c),e=as(this,d,b,0,1);return e}fft2(a){if(a.length<=1)return a;let b=ar(a.length-1)+1;this._setRoots(b);let c=1<<b,d=this.extend(a,c);ay(d,b);let e=at(this,d,b);return e}ifft(a){if(a.length<=1)return a;let b=ar(a.length-1)+1;this._setRoots(b);let c=1<<b,d=this.extend(a,c),e=as(this,d,b,0,1),f=this.F.inv(this.F.mulScalar(this.F.one,c)),g=Array(c);for(let h=0;h<c;h++)g[h]=this.F.mul(e[(c-h)%c],f);return g}ifft2(a){if(a.length<=1)return a;let b=ar(a.length-1)+1;this._setRoots(b);let c=1<<b,d=this.extend(a,c);ay(d,b);let e=at(this,d,b),f=this.F.inv(this.F.mulScalar(this.F.one,c)),g=Array(c);for(let h=0;h<c;h++)g[h]=this.F.mul(e[(c-h)%c],f);return g}_fft(a,b,c,d){let e=1<<b;if(1==e)return[a[c]];let f=e>>1,g=this._fft(a,b-1,c,2*d),h=this._fft(a,b-1,c+d,2*d),i=Array(e),j=this.F.one;for(let k=0;k<f;k++)i[k]=this.F.add(g[k],this.F.mul(j,h[k])),i[k+f]=this.F.sub(g[k],this.F.mul(j,h[k])),j=this.F.mul(j,this.w[b]);return i}extend(a,b){if(b==a.length)return a;let c=Array(b-a.length).fill(this.F.zero);return a.concat(c)}reduce(a){if(0==a.length||!this.F.eq(a[a.length-1],this.F.zero))return a;let b=a.length-1;for(;b>0&&this.F.eq(a[b],this.F.zero);)b--;return a.slice(0,b+1)}eq(a,b){let c=this.reduce(a),d=this.reduce(b);if(c.length!=d.length)return!1;for(let e=0;e<d.length;e++)if(!this.F.eq(c[e],d[e]))return!1;return!0}ruffini(a,b){let c=Array(a.length-1);c[c.length-1]=a[a.length-1];for(let d=c.length-2;d>=0;d--)c[d]=this.F.add(this.F.mul(c[d+1],b),a[d+1]);return c}_next2Power(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}toString(a){let b=this.normalize(a),c="";for(let d=b.length-1;d>=0;d--)!this.F.eq(a[d],this.F.zero)&&(""!=c&&(c+=" + "),c+=a[d].toString(10),d>0&&(c+="x",d>1&&(c=c+"^"+d)));return c}normalize(a){let b=Array(a.length);for(let c=0;c<a.length;c++)b[c]=this.F.normalize(a[c]);return b}_reciprocal(a,b){let c=1<<b;if(1==c)return[this.F.inv(a[0])];let d=this.scaleX(a,-c/2),e=this._reciprocal(d,b-1),f=this.scaleX(this.double(e),3*c/2-2),g=this.mul(this.square(e),a);return this.scaleX(this.sub(f,g),-(c-2))}_div2(a,b){let c=ar(b.length-1)+1,d=1<<c,e=d-b.length,f=this._reciprocal(this.scaleX(b,e),c),g=this.scaleX(f,a-2*d+2+e);return g}div(a,b){if(a.length<b.length)return[];let c=ar(b.length-1)+1,d=1<<c,e=this.scaleX(a,d-b.length),f=this.scaleX(b,d-b.length),g=f.length-1,h=e.length-1,i=this._reciprocal(f,c),j;h>2*g&&(j=this.sub(this.scaleX([this.F.one],2*g),this.mul(i,f)));let k=[],l=e,m,n,o=!1;for(;!o;)m=this.mul(l,i),k=this.add(k,this.scaleX(m,-2*g)),h>2*g?(n=this.mul(l,j),h=(l=this.scaleX(n,-2*g)).length-1):o=!0;return k}oneRoot(a,b){let c=ar(a-1)+1,d=this.F.one,e=b;if(b>=a)throw Error("Given 'i' should be lower than 'n'");if(1<<c!==a)throw Error(`Internal errlr: ${a} should equal ${1<<c}`);for(;e>0;)!0&e&&(d=this.F.mul(d,this.w[c])),e>>=1,c--;return d}computeVanishingPolinomial(a,b){return this.F.sub(this.F.pow(b,1<<a),this.F.one)}evaluateLagrangePolynomials(a,b){let c=1<<a,d=this.F.pow(b,c),e=Array(c).fill(this.F.zero);this._setRoots(a);let f=this.w[a];if(this.F.eq(d,this.F.one)){for(let g=0;g<c;g++)if(this.F.eq(this.roots[a][0],b))return e[g]=this.F.one,e}let h=this.F.sub(d,this.F.one),i=this.F.mul(h,this.F.inv(this.F.e(c)));for(let j=0;j<c;j++)e[j]=this.F.mul(i,this.F.inv(this.F.sub(b,this.roots[a][j]))),i=this.F.mul(i,f);return e}log2(a){return ar(a)}},b.Scalar=aq,b.ZqField=aV,b.buildBls12381=bF,b.buildBn128=bE,b.getCurveFromName=bM,b.getCurveFromQ=bL,b.getCurveFromR=bK,b.utils=bl}}])